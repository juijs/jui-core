!function(a,b){var c={jquery:"undefined"!=typeof jQuery?jQuery:null},d={},e={},f={template:{evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g},logUrl:"tool/debug.html"},g=c["util.base"]={browser:{webkit:"WebkitAppearance"in document.documentElement.style?!0:!1,mozilla:"undefined"!=typeof a.mozInnerScreenX?!0:!1,msie:-1!=a.navigator.userAgent.indexOf("Trident")?!0:!1},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a.navigator.userAgent),inherit:function(a,b){this.typeCheck("function",a)&&this.typeCheck("function",b)&&(a.parent=b,a.prototype=new b,a.prototype.constructor=a,a.prototype.parent=a.prototype,a.prototype["super"]=function(a,b){return this.constructor.prototype[a].apply(this,b)})},extend:function(a,b,c){function d(a){return g.typeCheck("object",a)}if(this.typeCheck(["object","function"],a)||(a={}),!this.typeCheck(["object","function"],b))return a;for(var e in b)c===!0?d(a[e])?this.extend(a[e],b[e],c):this.typeCheck("undefined",a[e])&&(a[e]=b[e]):d(a[e])?this.extend(a[e],b[e],c):a[e]=b[e];return a},pxToInt:function(a){return this.typeCheck("string",a)&&-1!=a.indexOf("px")?parseInt(a.split("px").join("")):a},clone:function(a){var b=this.typeCheck("array",a)?[]:{};for(var c in a)this.typeCheck("object",a[c])?b[c]=this.clone(a[c]):b[c]=a[c];return b},deepClone:function(a,b){var c=null;if(b=b||{},this.typeCheck("array",a)){c=new Array(a.length);for(var d=0,e=a.length;e>d;d++)c[d]=this.deepClone(a[d],b)}else if(this.typeCheck("date",a))c=a;else if(this.typeCheck("object",a)){c={};for(var f in a)b[f]?c[f]=a[f]:c[f]=this.deepClone(a[f],b)}else c=a;return c},sort:function(a){var b=jui.include("util.sort");return new b(a)},runtime:function(a,b){var c=(new Date).getTime();b();var d=(new Date).getTime();console.log(a+" : "+(d-c)+"ms")},template:function(a,b){var c=jui.include("util.template");return b?c(a,b,f.template):c(a,null,f.template)},resize:function(b,c){var d=function(){var a=0;return function(){clearTimeout(a),a=setTimeout(b,c)}}();a.addEventListener?a.addEventListener("resize",d):object.attachEvent?a.attachEvent("onresize",d):a.onresize=d},index:function(){var a=jui.include("util.keyparser");return new a},chunk:function(a,b){for(var c=[],d=0,e=a.length;e>d;)c.push(a.slice(d,d+=b));return c},typeCheck:function(a,b){function c(a,b){return"string"!=typeof a?!1:"string"==a?"string"==typeof b:"integer"==a?"number"==typeof b&&b%1==0:"float"==a?"number"==typeof b&&b%1!=0:"number"==a?"number"==typeof b:"boolean"==a?"boolean"==typeof b:"undefined"==a?"undefined"==typeof b:"null"==a?null===b:"array"==a?b instanceof Array:"date"==a?b instanceof Date:"function"==a?"function"==typeof b:"object"==a?!("object"!=typeof b||null===b||b instanceof Array||b instanceof Date||b instanceof RegExp):!1}if("object"==typeof a&&a.length){for(var d=a,e=0;e<d.length;e++)if(c(d[e],b))return!0;return!1}return c(a,b)},typeCheckObj:function(a,b){if("object"==typeof a){var c=this;for(var d in a){var e=a[d];"function"==typeof e&&!function(d,e){a[d]=function(){for(var a=arguments,f=b[d],g=0;g<a.length;g++)if(!c.typeCheck(f[g],a[g]))throw new Error("JUI_CRITICAL_ERR: the "+g+"th parameter is not a "+f[g]+" ("+name+")");return e.apply(this,a)}}(d,e)}}},dataToCsv:function(a,b,c){for(var d="",e=c?c:b.length,f=-1;e>f;f++){for(var g=[],h=0;h<a.length;h++)if(a[h])if(-1==f)g.push('"'+a[h]+'"');else{var i=b[f][a[h]];g.push(isNaN(i)?'"'+i+'"':i)}d+=g.join(",")+"\n"}return d},dataToCsv2:function(a){for(var b="",c=this.extend({fields:null,rows:null,names:null,count:this.typeCheck("integer",a.count)?a.count:a.rows.length},a),d=-1;d<c.count;d++){for(var e=[],f=0;f<c.fields.length;f++)if(c.fields[f])if(-1==d)c.names&&c.names[f]?e.push('"'+c.names[f]+'"'):e.push('"'+c.fields[f]+'"');else{var g=c.rows[d][c.fields[f]];e.push(isNaN(g)?'"'+g+'"':g)}b+=e.join(",")+"\n"}return b},fileToCsv:function(a,b){var c=new FileReader;c.onload=function(a){g.typeCheck("function",b)&&b(a.target.result)},c.readAsText(a)},csvToBase64:function(a){var b=jui.include("util.base64");return"data:application/octet-stream;base64,"+b.encode(a)},csvToData:function(a,b,c){for(var d=[],e=b.split("\n"),f=1;f<e.length;f++)if(""!=e[f]){for(var g=e[f].split(","),h={},i=0;i<a.length;i++)h[a[i]]=g[i],this.startsWith(g[i],'"')&&this.endsWith(g[i],'"')?h[a[i]]=g[i].split('"').join(""):h[a[i]]=g[i],-1!=this.inArray(a[i],c)&&(h[a[i]]=parseFloat(g[i]));d.push(h)}return d},getCsvFields:function(a,b){for(var c=this.typeCheck("array",b)?b:a,d=0;d<c.length;d++)isNaN(c[d])||(c[d]=a[c[d]]);return c},svgToBase64:function(a){var b=jui.include("util.base64");return"data:image/svg+xml;base64,"+b.encode(a)},dateFormat:function(a,b,c){function d(a,b){var c=a+"";for(b=b||2;c.length<b;)c="0"+c;return c}var e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],f=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=c?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+i),b=b.replace(/(^|[^\\])yy/g,"$1"+i.toString().substr(2,2)),b=b.replace(/(^|[^\\])y/g,"$1"+i);var j=(c?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+e[0]),b=b.replace(/(^|[^\\])MMM/g,"$1"+f[0]),b=b.replace(/(^|[^\\])MM/g,"$1"+d(j)),b=b.replace(/(^|[^\\])M/g,"$1"+j);var k=c?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+g[0]),b=b.replace(/(^|[^\\])ddd/g,"$1"+h[0]),b=b.replace(/(^|[^\\])dd/g,"$1"+d(k)),b=b.replace(/(^|[^\\])d/g,"$1"+k);var l=c?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+d(l)),b=b.replace(/(^|[^\\])H/g,"$1"+l);var m=l>12?l-12:0==l?12:l;b=b.replace(/(^|[^\\])hh+/g,"$1"+d(m)),b=b.replace(/(^|[^\\])h/g,"$1"+m);var n=c?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,"$1"+d(n)),b=b.replace(/(^|[^\\])m/g,"$1"+n);var o=c?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+d(o)),b=b.replace(/(^|[^\\])s/g,"$1"+o);var p=c?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+d(p,3)),p=Math.round(p/10),b=b.replace(/(^|[^\\])ff/g,"$1"+d(p)),p=Math.round(p/10),b=b.replace(/(^|[^\\])f/g,"$1"+p);var q=12>l?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+q),b=b.replace(/(^|[^\\])T/g,"$1"+q.charAt(0));var r=q.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+r),b=b.replace(/(^|[^\\])t/g,"$1"+r.charAt(0));var s=-a.getTimezoneOffset(),t=c||!s?"Z":s>0?"+":"-";if(!c){s=Math.abs(s);var u=Math.floor(s/60),v=s%60;t+=d(u)+":"+d(v)}b=b.replace(/(^|[^\\])K/g,"$1"+t);var w=(c?a.getUTCDay():a.getDay())+1;return b=b.replace(new RegExp(g[0],"g"),g[w]),b=b.replace(new RegExp(h[0],"g"),h[w]),b=b.replace(new RegExp(e[0],"g"),e[j]),b=b.replace(new RegExp(f[0],"g"),f[j]),b=b.replace(/\\(.)/g,"$1")},createId:function(a){return[a||"id",+new Date,Math.round(100*Math.random())%100].join("-")},btoa:function(a){var b=jui.include("util.base64");return b.encode(a)},atob:function(a){var b=jui.include("util.base64");return b.decode(a)},timeLoop:function(a,b){return function(c,d){function e(a){1>a||(1==a?(c.call(b,a),d.call(b)):setTimeout(function(){a>-1&&c.call(b,a--),a>-1&&e(a)},1))}e(a)}},loop:function(a,b){var c=0,d=a,e=Math.ceil(a/5);return function(a){for(var f=c,g=1*e,h=2*e,i=3*e,j=4*e,k=g,l=h,m=i,n=j,o=d;k>f&&d>f;)a.call(b,f,1),f++,l>g&&d>g&&(a.call(b,g,2),g++),m>h&&d>h&&(a.call(b,h,3),h++),n>i&&d>i&&(a.call(b,i,4),i++),o>j&&d>j&&(a.call(b,j,5),j++)}},loopArray:function(a,b){var c=a.length,d=0,e=c,f=Math.ceil(c/5);return function(c){for(var g=d,h=1*f,i=2*f,j=3*f,k=4*f,l=h,m=i,n=j,o=k,p=e;l>g&&e>g;)c.call(b,a[g],g,1),g++,m>h&&e>h&&(c.call(b,a[h],h,2),h++),n>i&&e>i&&(c.call(b,a[i],i,3),i++),o>j&&e>j&&(c.call(b,a[j],j,4),j++),p>k&&e>k&&(c.call(b,a[k],k,5),k++)}},makeIndex:function(a,b){var c={},d=this.loopArray(a);return d(function(a,d){var e=a[b];"undefined"==typeof c[e]&&(c[e]=[]),c[e].push(d)}),c},startsWith:function(a,b,c){return c=c||0,a.lastIndexOf(b,c)===c},endsWith:function(a,b,c){var d=a;(void 0===c||c>d.length)&&(c=d.length),c-=b.length;var e=d.indexOf(b,c);return-1!==e&&e===c},inArray:function(a,b){if(this.typeCheck(["undefined","null"],a)||!this.typeCheck("array",b))return-1;for(var c=0,d=b.length;d>c;c++)if(b[c]==a)return c;return-1},trim:function(a){var b="[\\x20\\t\\r\\n\\f]",c=new RegExp("^"+b+"+|((?:^|[^\\\\])(?:\\\\.)*)"+b+"+$","g");return null==a?"":(a+"").replace(c,"")},ready:function(){function b(){if(!g.isReady){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(b,1)}g.ready()}}function c(a){g.bindReady();g.type(a);d.done(a)}var d,e,f={};f["[object Boolean]"]="boolean",f["[object Number]"]="number",f["[object String]"]="string",f["[object Function]"]="function",f["[object Array]"]="array",f["[object Date]"]="date",f["[object RegExp]"]="regexp",f["[object Object]"]="object";var g={isReady:!1,readyWait:1,holdReady:function(a){a?g.readyWait++:g.ready(!0)},ready:function(a){if(a===!0&&!--g.readyWait||a!==!0&&!g.isReady){if(!document.body)return setTimeout(g.ready,1);if(g.isReady=!0,a!==!0&&--g.readyWait>0)return;d.resolveWith(document,[g])}},bindReady:function(){if(!d){if(d=g._Deferred(),"complete"===document.readyState)return setTimeout(g.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),a.addEventListener("load",g.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),a.attachEvent("onload",g.ready);var c=!1;try{c=null==a.frameElement}catch(f){}document.documentElement.doScroll&&c&&b()}}},_Deferred:function(){var a,b,c,d=[],e={done:function(){if(!c){var b,f,h,i,j,k=arguments;for(a&&(j=a,a=0),b=0,f=k.length;f>b;b++)h=k[b],i=g.type(h),"array"===i?e.done.apply(e,h):"function"===i&&d.push(h);j&&e.resolveWith(j[0],j[1])}return this},resolveWith:function(e,f){if(!c&&!a&&!b){f=f||[],b=1;try{for(;d[0];)d.shift().apply(e,f)}finally{a=[e,f],b=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!(!b&&!a)},cancel:function(){return c=1,d=[],this}};return e},type:function(a){return null==a?String(a):f[Object.prototype.toString.call(a)]||"object"}};return document.addEventListener?e=function(){document.removeEventListener("DOMContentLoaded",e,!1),g.ready()}:document.attachEvent&&(e=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),g.ready())}),c}(),param:function(a){var b=/%20/g,c=[],d=function(a,b){b=g.typeCheck("function",b)?b():null==b?"":b,c[c.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};for(var e in a)d(e,a[e]);return c.join("&").replace(b,"+")},ajax:function(a){var b=null,c="",d=null,e=g.extend({url:null,type:"GET",data:null,async:!0,success:null,fail:null},a);if(this.typeCheck("string",e.url)&&this.typeCheck("function",e.success)){if(this.typeCheck("object",e.data)&&(c=this.param(e.data)),this.typeCheck("undefined",XMLHttpRequest))for(var f=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],h=0,i=f.length;i>h;h++)try{b=new ActiveXObject(f[h]);break}catch(j){}else b=new XMLHttpRequest;null!=b&&(b.open(e.type,e.url,e.async),b.send(c),d=function(){4===b.readyState&&200==b.status?e.success(b):g.typeCheck("function",e.fail)&&e.fail(b)},e.async?b.onreadystatechange=d:d())}},scrollWidth:function(){var a=document.createElement("p");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.visibility="hidden",b.style.width="200px",b.style.height="150px",b.style.overflow="hidden",b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;return c==d&&(d=b.clientWidth),document.body.removeChild(b),c-d}},h=function(a){for(var b=[],d=0;d<a.length;d++){var e=c[a[d]];if(g.typeCheck(["function","object"],e))b.push(e);else{var f=i(a[d]);null==f?(console.log("JUI_WARNING_MSG: '"+a[d]+"' is not loaded"),b.push(null)):b.push(f)}}return b},i=function(a){var b=null,a=a+".";for(var d in c)if(-1!=d.indexOf(a)&&g.typeCheck(["function","object"],c[d])){var e=d.split(a).join("");-1==e.indexOf(".")&&(null==b&&(b={}),b[e]=c[d])}return b};a.jui=b.jui={ready:function(){var a=[],b=2==arguments.length?arguments[1]:arguments[0],c=2==arguments.length?arguments[0]:null;if(!g.typeCheck(["array","null"],c)||!g.typeCheck("function",b))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");g.ready(function(){if(c)a=h(c);else{var d=i("ui"),e={};g.extend(e,d),g.extend(e,i("grid")),a=[d,e,g]}b.apply(null,a)})},defineUI:function(a,b,f,i){if(!(g.typeCheck("string",a)&&g.typeCheck("array",b)&&g.typeCheck("function",f)&&g.typeCheck(["string","undefined"],i)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(g.typeCheck("function",e[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");if(g.typeCheck("undefined",i)&&(i="event"),!g.typeCheck("function",e[i]))throw new Error("JUI_CRITICAL_ERR: Parents are the only function");if(d[i]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");var j=h(b),k=f.apply(null,j);g.inherit(k,e[i]),c[a]=e["core"!=i?"event":"core"].init({type:a,"class":k}),e[a]=k,d[a]=!0},createUIObject:function(a,b,c,d,e,f){var h=new a["class"],i=jui.defineOptions(a["class"],e||{});h.init.prototype=h,h.init.prototype.selector=b,h.init.prototype.root=d,h.init.prototype.options=i,h.init.prototype.tpl={},h.init.prototype.event=new Array,h.init.prototype.timestamp=(new Date).getTime(),h.init.prototype.index=c,h.init.prototype.module=a,g.typeCheck("function",f)&&f(h,i);for(var j in i.tpl){var k=i.tpl[j];g.typeCheck("string",k)&&""!=k&&(h.init.prototype.tpl[j]=g.template(k))}var l=new h.init;for(var m in i.event)l.on(m,i.event[m]);return d.jui=l,l},define:function(a,b,f,i){if(!(g.typeCheck("string",a)&&g.typeCheck("array",b)&&g.typeCheck("function",f)&&g.typeCheck(["string","undefined"],i)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(g.typeCheck("function",e[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");var j=h(b),k=f.apply(null,j);if(g.typeCheck("function",e[i])){if(d[i]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");g.inherit(k,e[i])}c[a]=k,e[a]=k,d[a]=!0},redefine:function(a,b,f,g){d[a]===!0&&(c[a]=null,e[a]=null,d[a]=!1),this.define(a,b,f,g)},defineOptions:function(a,b,c){function d(a,b){if(g.typeCheck("function",a)){if(g.typeCheck("function",a.setup)){var c=a.setup();for(var e in c)g.typeCheck("undefined",b[e])&&(b[e]=c[e])}d(a.parent,b)}return b}for(var e=d(a,{}),f=Object.keys(e),h=Object.keys(b),i=0;i<h.length;i++){var j=h[i];if(-1==g.inArray(j,f)&&-1==g.inArray(j,c))throw new Error("JUI_CRITICAL_ERR: '"+j+"' is not an option")}return g.extend(b,e,!0),b},include:function(a){if(!g.typeCheck("string",a))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");var b=c[a];if(g.typeCheck(["function","object"],b))return b;var d=i(a);return null==d?(console.log("JUI_WARNING_MSG: '"+a+"' is not loaded"),null):d},includeAll:function(){var a=[];for(var b in c)a.push(c[b]);return a},log:function(b){var c=a.open(b||f.logUrl,"JUIM","width=1024, height=768, toolbar=no, menubar=no, resizable=yes");return jui.debugAll(function(a,b){c.log(a,b)}),c},setup:function(a){return g.typeCheck("object",a)&&(f=g.extend(f,a)),f}},"object"==typeof module&&module.exports&&(module.exports=a.jui||c.jui)}(window,"undefined"!=typeof global?global:window),jui.define("util.dom",["util.base"],function(a){return{find:function(){var b=arguments;if(1==b.length){if(a.typeCheck("string",b[0]))return document.querySelectorAll(b[0])}else if(2==b.length&&a.typeCheck("object",b[0])&&a.typeCheck("string",b[1]))return b[0].querySelectorAll(b[1]);return[]},each:function(b,c){if(a.typeCheck("function",c)){var d=null;a.typeCheck("string",b)?d=document.querySelectorAll(b):a.typeCheck("array",b)&&(d=b),null!=d&&Array.prototype.forEach.call(d,function(a,b){c.apply(a,[b,a])})}},attr:function(b,c){if(a.typeCheck(["string","array"],b)){var d=document.querySelectorAll(b);if(a.typeCheck("object",c))for(var e=0;e<d.length;e++)for(var f in c)d[e].setAttribute(f,c[f]);else if(a.typeCheck("string",c)&&d.length>0)return d[0].getAttribute(c)}},remove:function(a){this.each(a,function(){this.parentNode.removeChild(this)})},offset:function(a){function b(a){return null!=a&&a==a.window}function c(a){return b(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var d,e,f={top:0,left:0},g=a&&a.ownerDocument;if(g){d=g.documentElement;var h="undefined";return typeof a.getBoundingClientRect!==h&&(f=a.getBoundingClientRect()),e=c(g),{top:f.top+(e.pageYOffset||d.scrollTop)-(d.clientTop||0),left:f.left+(e.pageXOffset||d.scrollLeft)-(d.clientLeft||0)}}}}}),jui.define("util.sort",[],function(){var a=function(a,b){function c(b,c){var d=a[b];a[b]=a[c],a[c]=d}function d(b,d,f){var g=d,h=a[b];c(b,f);for(var i=d;f>i;i++)(e(a[i],h)||!e(h,a[i])&&i%2==1)&&(c(i,g),g++);return c(f,g),g}var e=null,a=b?a.slice(0):a;this.setCompare=function(a){e=a},this.run=function(b,c){var e=null;return"number"!=typeof b&&(b=0),"number"!=typeof c&&(c=a.length-1),c>b&&(e=b+Math.ceil(.5*(c-b)),newPivot=d(e,b,c),this.run(b,newPivot-1),this.run(newPivot+1,c)),a}};return a}),jui.define("util.keyparser",[],function(){var a=function(){this.isIndexDepth=function(a){return"string"==typeof a&&-1!=a.indexOf(".")?!0:!1},this.getIndexList=function(a){var b=[],c=""+a;if(1==c.length)b[0]=parseInt(a);else for(var d=c.split("."),e=0;e<d.length;e++)b[e]=parseInt(d[e]);return b},this.changeIndex=function(a,b,c){for(var d=this.getIndexList(c).length,e=this.getIndexList(a),f=this.getIndexList(b),g=0;d>g;g++)e.shift();return f.concat(e).join(".")},this.getNextIndex=function(a){var b=this.getIndexList(a),c=b.pop()+1;return b.push(c),b.join(".")},this.getParentIndex=function(a){if(!this.isIndexDepth(a))return null;var b=this.getIndexList(a);return 2==b.length?""+b[0]:b.length>2?(b.pop(),b.join(".")):void 0}};return a}),jui.define("util.base64",[],function(){var a={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=a._utf8_encode(b);k<b.length;)c=b.charCodeAt(k++),d=b.charCodeAt(k++),e=b.charCodeAt(k++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+a._keyStr.charAt(f)+a._keyStr.charAt(g)+a._keyStr.charAt(h)+a._keyStr.charAt(i);return j},decode:function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<b.length;)f=a._keyStr.indexOf(b.charAt(k++)),g=a._keyStr.indexOf(b.charAt(k++)),h=a._keyStr.indexOf(b.charAt(k++)),i=a._keyStr.indexOf(b.charAt(k++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!=h&&(j+=String.fromCharCode(d)),64!=i&&(j+=String.fromCharCode(e));return j=a._utf8_decode(j)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b=String.fromCharCode(239)+String.fromCharCode(187)+String.fromCharCode(191),c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}};return a}),jui.define("util.template",[],function(){var a=function(a,b,c){var d={},e={},f=Array.prototype,g=f.slice,h=f.forEach,i={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var j in i)i[i[j]]=j;var k=/\\|'|\r|\n|\t|\u2028|\u2029/g,l=/\\(\\|'|r|n|t|u2028|u2029)/g,m=/.^/,n=function(a){return a.replace(l,function(a,b){return i[b]})},o=d.each=d.forEach=function(a,b,c){if(null!=a)if(h&&a.forEach===h)a.forEach(b,c);else if(a.length===+a.length){for(var f=0,g=a.length;g>f;f++)if(f in a&&b.call(c,a[f],f,a)===e)return}else for(var i in a)if(d.has(a,i)&&b.call(c,a[i],i,a)===e)return};return d.has=function(a,b){return hasOwnProperty.call(a,b)},d.defaults=function(a){return o(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},d.template=function(a,b,c){c=d.defaults(c||{});var e="__p+='"+a.replace(k,function(a){return"\\"+i[a]}).replace(c.escape||m,function(a,b){return"'+\n_.escape("+n(b)+")+\n'"}).replace(c.interpolate||m,function(a,b){return"'+\n("+n(b)+")+\n'"}).replace(c.evaluate||m,function(a,b){return"';\n"+n(b)+"\n;__p+='"})+"';\n";c.variable||(e="with(obj||{}){\n"+e+"}\n"),e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n";var f=new Function(c.variable||"obj","_",e);if(b)return f(b,d);var g=function(a){return f.call(this,a,d)};return g.source="function("+(c.variable||"obj")+"){\n"+e+"}",g},d.template(a,b,c)};return a}),jui.define("util.math",["util.base"],function(a){function b(a,b){for(var c=[],d=0,e=a.length;e>d;d++){for(var f=0,g=0,h=a[d].length;h>g;g++)f+=a[d][g]*b[g];c.push(f)}return c}function c(a,c){for(var d=[],e=[],f=0,g=c.length;g>f;f++)d[f]=[],e[f]=[];for(var f=0,g=c.length;g>f;f++)for(var h=0,i=c[f].length;i>h;h++)d[h].push(c[f][h]);for(var f=0,g=d.length;g>f;f++)for(var j=b(a,d[f]),h=0,i=j.length;i>h;h++)e[h].push(j[h]);return e}function d(a,b){var c=new Float32Array(4);return c[0]=a[0][0]*b[0]+a[0][1]*b[1]+a[0][2]*b[2]+a[0][3]*b[3],c[1]=a[1][0]*b[0]+a[1][1]*b[1]+a[1][2]*b[2]+a[1][3]*b[3],c[2]=a[2][0]*b[0]+a[2][1]*b[1]+a[2][2]*b[2]+a[2][3]*b[3],c[3]=a[3][0]*b[0]+a[3][1]*b[1]+a[3][2]*b[2]+a[3][3]*b[3],c}function e(a,b){var c=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],d=[new Float32Array([b[0][0],b[1][0],b[2][0],b[3][0]]),new Float32Array([b[0][1],b[1][1],b[2][1],b[3][1]]),new Float32Array([b[0][2],b[1][2],b[2][2],b[3][2]]),new Float32Array([b[0][3],b[1][3],b[2][3],b[3][3]])];return c[0][0]=a[0][0]*d[0][0]+a[0][1]*d[0][1]+a[0][2]*d[0][2]+a[0][3]*d[0][3],c[1][0]=a[1][0]*d[0][0]+a[1][1]*d[0][1]+a[1][2]*d[0][2]+a[1][3]*d[0][3],c[2][0]=a[2][0]*d[0][0]+a[2][1]*d[0][1]+a[2][2]*d[0][2]+a[2][3]*d[0][3],c[3][0]=a[3][0]*d[0][0]+a[3][1]*d[0][1]+a[3][2]*d[0][2]+a[3][3]*d[0][3],c[0][1]=a[0][0]*d[1][0]+a[0][1]*d[1][1]+a[0][2]*d[1][2]+a[0][3]*d[1][3],c[1][1]=a[1][0]*d[1][0]+a[1][1]*d[1][1]+a[1][2]*d[1][2]+a[1][3]*d[1][3],c[2][1]=a[2][0]*d[1][0]+a[2][1]*d[1][1]+a[2][2]*d[1][2]+a[2][3]*d[1][3],c[3][1]=a[3][0]*d[1][0]+a[3][1]*d[1][1]+a[3][2]*d[1][2]+a[3][3]*d[1][3],c[0][2]=a[0][0]*d[2][0]+a[0][1]*d[2][1]+a[0][2]*d[2][2]+a[0][3]*d[2][3],c[1][2]=a[1][0]*d[2][0]+a[1][1]*d[2][1]+a[1][2]*d[2][2]+a[1][3]*d[2][3],c[2][2]=a[2][0]*d[2][0]+a[2][1]*d[2][1]+a[2][2]*d[2][2]+a[2][3]*d[2][3],c[3][2]=a[3][0]*d[2][0]+a[3][1]*d[2][1]+a[3][2]*d[2][2]+a[3][3]*d[2][3],c[0][3]=a[0][0]*d[3][0]+a[0][1]*d[3][1]+a[0][2]*d[3][2]+a[0][3]*d[3][3],c[1][3]=a[1][0]*d[3][0]+a[1][1]*d[3][1]+a[1][2]*d[3][2]+a[1][3]*d[3][3],c[2][3]=a[2][0]*d[3][0]+a[2][1]*d[3][1]+a[2][2]*d[3][2]+a[2][3]*d[3][3],c[3][3]=a[3][0]*d[3][0]+a[3][1]*d[3][1]+a[3][2]*d[3][2]+a[3][3]*d[3][3],c}function f(a){var b=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],c=a[0][0],d=a[0][1],e=a[0][2],f=a[0][3],g=a[1][0],h=a[1][1],i=a[1][2],j=a[1][3],k=a[2][0],l=a[2][1],m=a[2][2],n=a[2][3],o=a[3][0],p=a[3][1],q=a[3][2],r=a[3][3];b[0][0]=i*n*p-j*m*p+j*l*q-h*n*q-i*l*r+h*m*r,b[0][1]=f*m*p-e*n*p-f*l*q+d*n*q+e*l*r-d*m*r,b[0][2]=e*j*p-f*i*p+f*h*q-d*j*q-e*h*r+d*i*r,b[0][3]=f*i*l-e*j*l-f*h*m+d*j*m+e*h*n-d*i*n,b[1][0]=j*m*o-i*n*o-j*k*q+g*n*q+i*k*r-g*m*r,b[1][1]=e*n*o-f*m*o+f*k*q-c*n*q-e*k*r+c*m*r,b[1][2]=f*i*o-e*j*o-f*g*q+c*j*q+e*g*r-c*i*r,b[1][3]=e*j*k-f*i*k+f*g*m-c*j*m-e*g*n+c*i*n,b[2][0]=h*n*o-j*l*o+j*k*p-g*n*p-h*k*r+g*l*r,b[2][1]=f*l*o-d*n*o-f*k*p+c*n*p+d*k*r-c*l*r,b[2][2]=d*j*o-f*h*o+f*g*p-c*j*p-d*g*r+c*h*r,b[2][3]=f*h*k-d*j*k-f*g*l+c*j*l+d*g*n-c*h*n,b[3][0]=i*l*o-h*m*o-i*k*p+g*m*p+h*k*q-g*l*q,b[3][1]=d*m*o-e*l*o+e*k*p-c*m*p-d*k*q+c*l*q,b[3][2]=e*h*o-d*i*o-e*g*p+c*i*p+d*g*q-c*h*q,b[3][4]=d*i*k-e*h*k+e*g*l-c*i*l-d*g*m+c*h*m;var s=1/(c*b[0][0]+g*b[0][1]+k*b[0][2]+o*b[0][3]);return 0===s?b=[new Float32Array([1,0,0,0]),new Float32Array([0,1,0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])]:(b[0][0]*=s,b[0][1]*=s,b[0][2]*=s,b[0][3]*=s,b[1][0]*=s,b[1][1]*=s,b[1][2]*=s,b[1][3]*=s,b[2][0]*=s,b[2][1]*=s,b[2][2]*=s,b[2][3]*=s,b[3][0]*=s,b[3][1]*=s,b[3][2]*=s,b[3][4]*=s),b}var g={rotate:function(a,b,c){return{x:a*Math.cos(c)-b*Math.sin(c),y:a*Math.sin(c)+b*Math.cos(c)}},resize:function(a,b,c,d){var e=d/c;return c>=a&&1>=e?(c=a,d=b*e):d>=b&&(d=b,c=a/e),{width:c,height:d}},radian:function(a){return a*Math.PI/180},degree:function(a){return 180*a/Math.PI},angle:function(a,b,c,d){var e=c-a,f=d-b;return Math.atan2(f,e)},interpolateNumber:function(a,b){var c=b-a;return function(b){return a+c*b}},interpolateRound:function(a,b){var c=b-a;return function(b){return Math.round(a+c*b)}},getFixed:function(a,b){var c=(a+"").split("."),d=c.length<2?0:c[1].length,e=(b+"").split("."),f=e.length<2?0:e[1].length;return d>f?d:f},fixed:function(a){var b=this.getFixed(a,0),c=Math.pow(10,b),d=function(a){return Math.round(a*c)/c};return d.plus=function(a,b){return Math.round(a*c+b*c)/c},d.minus=function(a,b){return Math.round(a*c-b*c)/c},d.multi=function(a,b){return Math.round(a*c*(b*c))/(c*c)},d.div=function(a,b){var d=a*c/(b*c),e=Math.pow(10,this.getFixed(d,0));return Math.round(d*e)/e},d.remain=function(a,b){return Math.round(a*c%(b*c))/c},d},round:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},plus:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c+b*c)/c},minus:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c-b*c)/c},multi:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c*(b*c))/(c*c)},div:function(a,b){var c=Math.pow(10,this.getFixed(a,b)),d=a*c/(b*c),e=Math.pow(10,this.getFixed(d,0));return Math.round(d*e)/e},remain:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c%(b*c))/c},nice:function(a,b,c,d){function e(a,b){var c=Math.floor(Math.log(a)/Math.LN10),d=a/Math.pow(10,c);return b?1.5>d?niceFraction=1:3>d?niceFraction=2:7>d?niceFraction=5:niceFraction=10:1>=d?niceFraction=1:2>=d?niceFraction=2:5>=d?niceFraction=5:niceFraction=10,niceFraction*Math.pow(10,c)}function f(){m=d?e(g-h,!1):g-h,l=d?e(m/k,!0):m/k,i=d?Math.floor(h/l)*l:h,j=d?Math.floor(g/l)*l:g}if(d=d||!1,a>b)var g=a,h=b;else var h=a,g=b;var i,j,k=c,l=0,m=[];return f(),{min:i,max:j,range:m,spacing:l}},matrix:function(d,e){return a.typeCheck("array",e[0])?c(d,e):b(d,e)},matrix3d:function(a,b){return b[0]instanceof Array||b[0]instanceof Float32Array?e(a,b):d(a,b)},inverseMatrix3d:function(a){return f(a)},scaleValue:function(a,b,c,d,e){function f(){var d=c-b,e=a-b,f=e/d;return f}b=b==c?0:b;var g=e-d,h=g*f();return h+d}};return g}),jui.define("util.transform",["util.math"],function(a){var b=function(b){function c(c){for(var d=0,e=b.length;e>d;d++)b[d]=a.matrix(c,b[d]);return b}this.matrix=function(){var b=arguments,c=b[0];return"move"==c?[new Float32Array([1,0,b[1]]),new Float32Array([0,1,b[2]]),new Float32Array([0,0,1])]:"scale"==c?[new Float32Array([b[1],0,0]),new Float32Array([0,b[2],0]),new Float32Array([0,0,1])]:"rotate"==c?[new Float32Array([Math.cos(a.radian(b[1])),-Math.sin(a.radian(b[1])),0]),new Float32Array([Math.sin(a.radian(b[1])),Math.cos(a.radian(b[1])),0]),new Float32Array([0,0,1])]:"move3d"==c?[new Float32Array([1,0,0,b[1]]),new Float32Array([0,1,0,b[2]]),new Float32Array([0,0,1,b[3]]),new Float32Array([0,0,0,1])]:"scale3d"==c?[new Float32Array([b[1],0,0,0]),new Float32Array([0,b[2],0,0]),new Float32Array([0,0,b[3],0]),new Float32Array([0,0,0,1])]:"rotate3dz"==c?[new Float32Array([Math.cos(a.radian(b[1])),-Math.sin(a.radian(b[1])),0,0]),new Float32Array([Math.sin(a.radian(b[1])),Math.cos(a.radian(b[1])),0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])]:"rotate3dx"==c?[new Float32Array([1,0,0,0]),new Float32Array([0,Math.cos(a.radian(b[1])),-Math.sin(a.radian(b[1])),0]),new Float32Array([0,Math.sin(a.radian(b[1])),Math.cos(a.radian(b[1])),0]),new Float32Array([0,0,0,1])]:"rotate3dy"==c?[new Float32Array([Math.cos(a.radian(b[1])),0,Math.sin(a.radian(b[1])),0]),new Float32Array([0,1,0,0]),new Float32Array([-Math.sin(a.radian(b[1])),0,Math.cos(a.radian(b[1])),0]),new Float32Array([0,0,0,1])]:void 0},this.move=function(a,b){return c(this.matrix("move",a,b))},this.move3d=function(a,b,d){return c(this.matrix("move3d",a,b,d))},this.scale=function(a,b){return c(this.matrix("scale",a,b))},this.scale3d=function(a,b,d){return c(this.matrix("scale3d",a,b,d))},this.rotate=function(a){return c(this.matrix("rotate",a))},this.rotate3dz=function(a){return c(this.matrix("rotate3dz",a))},this.rotate3dx=function(a){return c(this.matrix("rotate3dx",a))},this.rotate3dy=function(a){return c(this.matrix("rotate3dy",a))},this.custom=function(a){return c(a)},this.merge=function(){for(var b=arguments,d=this.matrix.apply(this,b[0]),e=1;e<b.length;e++)d=a.matrix(d,this.matrix.apply(this,b[e]));return c(d)},this.merge2=function(c){for(var d=0,e=b.length;e>d;d++){for(var f=c.apply(null,b[d]),g=this.matrix.apply(this,f[0]),h=1;h<f.length;h++)g=a.matrix(g,this.matrix.apply(this,f[h]));b[d]=a.matrix(g,b[d])}}};return b}),jui.define("util.time",["util.base"],function(a){var b={MILLISECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,years:"years",months:"months",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds",milliseconds:"milliseconds",weeks:"weeks",diff:function(a,c,d){var e=+c-+d;return"seconds"==a?Math.abs(Math.floor(e/b.MILLISECOND)):"minutes"==a?Math.abs(Math.floor(e/b.MINUTE)):"hours"==a?Math.abs(Math.floor(e/b.HOUR)):"days"==a?Math.abs(Math.floor(e/b.DAY)):e},add:function(a){if(arguments.length<=2)return a;if(arguments.length>2){for(var b=new Date(+a),c=1;c<arguments.length;c+=2){var d="string"==typeof arguments[c]?this[arguments[c]]:arguments[c],e=arguments[c+1];this.years==d?b.setFullYear(b.getFullYear()+e):this.months==d?b.setMonth(b.getMonth()+e):this.days==d?b.setDate(b.getDate()+e):this.hours==d?b.setHours(b.getHours()+e):this.minutes==d?b.setMinutes(b.getMinutes()+e):this.seconds==d?b.setSeconds(b.getSeconds()+e):this.milliseconds==d?b.setMilliseconds(b.getMilliseconds()+e):this.weeks==d&&b.setDate(b.getDate()+7*e)}return b}},format:function(b,c,d){return a.dateFormat(b,c,d)}};return b}),jui.define("util.color",["util.base","util.math"],function(a,b){var c={regex:/(linear|radial)\((.*)\)(.*)/i,format:function(a,b){if("hex"==b){var c=a.r.toString(16);a.r<16&&(c="0"+c);var d=a.g.toString(16);a.g<16&&(d="0"+d);var e=a.b.toString(16);return a.b<16&&(e="0"+e),"#"+[c,d,e].join("").toUpperCase()}return"rgb"==b?"undefined"==typeof a.a?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")":a},scale:function(){function a(a,b){var f={r:parseInt(d.r+(e.r-d.r)*a,10),g:parseInt(d.g+(e.g-d.g)*a,10),b:parseInt(d.b+(e.b-d.b)*a,10)};return c.format(f,b)}var d,e;return a.domain=function(b,f){return d=c.rgb(b),e=c.rgb(f),a},a.ticks=function(c){for(var d=1/c,e=0,f=[];1>=e;){var g=a(e,"hex");f.push(g),e=b.plus(e,d)}return f},a},map:function(a,b){var d=[];b=b||5;for(var e=c.scale(),f=0,g=a.length-1;g>f;f++)if(0==f)d=e.domain(a[f],a[f+1]).ticks(b);else{var h=e.domain(a[f],a[f+1]).ticks(b);h.shift(),d=d.concat(h)}return d},rgb:function(b){if("string"==typeof b){if(b.indexOf("rgb(")>-1){for(var c=b.replace("rgb(","").replace(")","").split(","),d=0,e=c.length;e>d;d++)c[d]=parseInt(a.trim(c[d]),10);return{r:c[0],g:c[1],b:c[2],a:1}}if(b.indexOf("rgba(")>-1){for(var c=b.replace("rgba(","").replace(")","").split(","),d=0,e=c.length;e>d;d++)e-1==d?c[d]=parseFloat(a.trim(c[d])):c[d]=parseInt(a.trim(c[d]),10);return{r:c[0],g:c[1],b:c[2],
a:c[3]}}if(0==b.indexOf("#")){b=b.replace("#","");var c=[];if(3==b.length)for(var d=0,e=b.length;e>d;d++){var f=b.substr(d,1);c.push(parseInt(f+f,16))}else for(var d=0,e=b.length;e>d;d+=2)c.push(parseInt(b.substr(d,2),16));return{r:c[0],g:c[1],b:c[2],a:1}}}return b},HSVtoRGB:function(a,b,c){360==a&&(a=0);var d=b*c,e=d*(1-Math.abs(a/60%2-1)),f=c-d,g=[];return a>=0&&60>a?g=[d,e,0]:a>=60&&120>a?g=[e,d,0]:a>=120&&180>a?g=[0,d,e]:a>=180&&240>a?g=[0,e,d]:a>=240&&300>a?g=[e,0,d]:a>=300&&360>a&&(g=[d,0,e]),{r:Math.ceil(255*(g[0]+f)),g:Math.ceil(255*(g[1]+f)),b:Math.ceil(255*(g[2]+f))}},RGBtoHSV:function(a,b,c){var d=a/255,e=b/255,f=c/255,g=Math.max(d,e,f),h=Math.min(d,e,f),i=g-h,j=0;0==i?j=0:g==d?j=60*((e-f)/i%6):g==e?j=60*((f-d)/i+2):g==f&&(j=60*((d-e)/i+4)),0>j&&(j=360+j);var k=0;k=0==g?0:i/g;var l=g;return{h:j,s:k,v:l}},trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},lighten:function(a,b){a=a.replace(/[^0-9a-f]/gi,""),b=b||0;var c,d,e=[];for(d=0;6>d;d+=2)c=parseInt(a.substr(d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e.push(("00"+c).substr(c.length));return"#"+e.join("")},darken:function(a,b){return this.lighten(a,-b)},parse:function(a){return this.parseGradient(a)},parseGradient:function(a){var b=a.match(this.regex);if(!b)return a;var c=this.trim(b[1]),d=this.parseAttr(c,this.trim(b[2])),e=this.parseStop(this.trim(b[3])),f={type:c+"Gradient",attr:d,children:e};return f},parseStop:function(a){for(var b=a.split(","),c=[],d=0,e=b.length;e>d;d++){var a=b[d],f=a.split(" ");0!=f.length&&(1==f.length?c.push({type:"stop",attr:{"stop-color":f[0]}}):2==f.length?c.push({type:"stop",attr:{offset:f[0],"stop-color":f[1]}}):3==f.length&&c.push({type:"stop",attr:{offset:f[0],"stop-color":f[1],"stop-opacity":f[2]}}))}for(var g=-1,h=-1,d=0,e=c.length;e>d;d++){var a=c[d];if(0==d?a.offset||(a.offset=0):d==e-1&&(a.offset||(a.offset=1)),-1==g&&"undefined"==typeof a.offset)g=d;else if(-1==h&&"undefined"==typeof a.offset){h=d;for(var i=h-g,j=c[h].offset.indexOf("%")>-1?parseFloat(c[h].offset)/100:c[h].offset,k=c[g].offset.indexOf("%")>-1?parseFloat(c[g].offset)/100:c[g].offset,l=j-k,m=l/i,n=k+m,o=g+1;h>o;o++)c[o].offset=n,n+=m;g=h,h=-1}}return c},parseAttr:function(a,b){if("linear"!=a){for(var c=b.split(","),d=0,e=c.length;e>d;d++)-1==c[d].indexOf("%")&&(c[d]=parseFloat(c[d]));return{cx:c[0],cy:c[1],r:c[2],fx:c[3],fy:c[4]}}switch(b){case"":case"left":return{x1:0,y1:0,x2:1,y2:0,direction:b||"left"};case"right":return{x1:1,y1:0,x2:0,y2:0,direction:b};case"top":return{x1:0,y1:0,x2:0,y2:1,direction:b};case"bottom":return{x1:0,y1:1,x2:0,y2:0,direction:b};case"top left":return{x1:0,y1:0,x2:1,y2:1,direction:b};case"top right":return{x1:1,y1:0,x2:0,y2:1,direction:b};case"bottom left":return{x1:0,y1:1,x2:1,y2:0,direction:b};case"bottom right":return{x1:1,y1:1,x2:0,y2:0,direction:b};default:for(var c=b.split(","),d=0,e=c.length;e>d;d++)-1==c[d].indexOf("%")&&(c[d]=parseFloat(c[d]));return{x1:c[0],y1:c[1],x2:c[2],y2:c[3]}}}};return c.map.parula=function(a){return c.map(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],a)},c.map.jet=function(a){return c.map(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],a)},c.map.hsv=function(a){return c.map(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],a)},c.map.hot=function(a){return c.map(["#0b0000","#ff0000","#ffff00","#ffffff"],a)},c.map.pink=function(a){return c.map(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],a)},c.map.bone=function(a){return c.map(["#000000","#4a4a68","#a6c6c6","#ffffff"],a)},c.map.copper=function(a){return c.map(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],a)},c}),jui.define("util.scale.linear",["util.math"],function(a){var b=function(){function c(a){if(a>l)return g?c(l):e[0]+Math.abs(a-d[0])*q;if(k>a)return g?c(k):e[0]-Math.abs(a-d[0])*q;var b=(a-d[0])/o;return r(b)}var d=[0,1],e=[0,1],f=!1,g=!1,h={},i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=0,r=null,s=null;return c.cache=function(){return h},c.min=function(){return Math.min.apply(Math,d)},c.max=function(){return Math.max.apply(Math,d)},c.rangeMin=function(){return Math.min.apply(Math,e)},c.rangeMax=function(){return Math.max.apply(Math,e)},c.rate=function(a,b){return c(c.max()*(a/b))},c.clamp=function(a){g=a||!1},c.domain=function(a){if(!arguments.length)return d;for(var b=0;b<a.length;b++)d[b]=a[b];return k=c.min(),l=c.max(),o=d[1]-d[0],this},c.range=function(b){if(!arguments.length)return e;for(var d=0;d<b.length;d++)e[d]=b[d];return i=a.interpolateRound(e[0],e[1]),j=a.interpolateNumber(e[0],e[1]),m=c.rangeMin(),n=c.rangeMax(),p=Math.abs(n-m),q=p/o,r=f?i:j,this},c.rangeRound=function(a){return f=!0,c.range(a)},c.rangeBand=function(){return s},c.invert=function(a){var c=b().domain(e).range(d);return c(a)},c.ticks=function(b,e,f,g){g=g||!1;var h=c.max();if(0==d[0]&&0==d[1])return[];for(var i=a.nice(d[0],d[1],b||10,e||!1),j=[],k=g?i.max:i.min,l=g?i.min:i.max,m=i.spacing,n=a.fixed(m);g?k>=l:l>=k;)j.push(k),k=g?n.minus(k,m):n.plus(k,m);if(g){j[0]!=h&&j.unshift(h);for(var o=0,p=j.length;p>o;o++)j[o]=Math.abs(j[o]-h)}else j[j.length-1]!=l&&k>l&&j.push(l),d[0]>d[1]&&j.reverse();var q=c(j[0]),r=c(j[1]);return s=Math.abs(r-q),j},c};return b}),jui.define("util.scale.circle",[],function(){var a=function(){function a(a){}var b=[],c=[],d=0;return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,f){f=f||0;for(var g=b.length,h=(e[1]-e[0]-f)/g,i=[],j=0;j<b.length;j++)0==j?i[j]=e[0]+f/2+h/2:i[j]=i[j-1]+h;return c=i,d=h,a},a.rangeBands=function(e,f,g){f=f||0,g=g||0;for(var h=b.length,i=h-1,j=(e[1]-e[0])/i,k=[],l=0;l<b.length;l++)0==l?k[l]=e[0]:k[l]=j+k[l-1];return d=j,c=k,a},a.rangeBand=function(){return d},a};return a}),jui.define("util.scale.log",["util.base","util.scale.linear"],function(a,b){var c=function(c){function d(a){return 0>a?-(Math.log(Math.abs(a))/Math.log(h)):a>0?Math.log(a)/Math.log(h):0}function e(a){return 0>a?-Math.pow(h,Math.abs(a)):a>0?Math.pow(h,a):0}function f(a){return Math.pow(h,(a+"").length-1)<a}function g(a){return Math.pow(h,(a+"").length)}var h=c||10,i=b(),j=[],k=null,l=null,m=function(a){var b=a;return a>k?b=k:l>a&&(b=l),i(d(b))};return a.extend(m,i),m.log=function(){for(var a=[],b=0;b<j.length;b++)a[b]=d(j[b]);return a},m.domain=function(a){if(!arguments.length)return j;for(var b=0;b<a.length;b++)j[b]=a[b];if(k=Math.max.apply(Math,j),l=Math.min.apply(Math,j),f(k)&&(j[1]=k=g(k)),f(Math.abs(l))){var c=g(Math.abs(l));j[0]=l=0>l?-c:c}return i.domain(m.log()),m},m.base=function(a){return i.domain(m.log()),m},m.invert=function(a){return e(i.invert(a))},m.ticks=function(a,b,c){var d=i.ticks(a,b,c||1e20,!0);d[d.length-1]<i.max()&&d.push(i.max());for(var f=[],g=0,h=d.length;h>g;g++)f[g]=e(d[g]);return f},m};return c}),jui.define("util.scale.ordinal",[],function(){var a=function(){function a(a){var d=""+a;if("undefined"!=typeof e[d])return e[d];for(var f=-1,g=0;g<b.length;g++)if("string"==typeof a&&b[g]===a){f=g;break}return f>-1?(e[d]=c[f],c[f]):"undefined"!=typeof c[a]?(e[d]=c[a],c[a]):null}var b=[],c=[],d=0,e={},f=!1;return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,g){g=g||0;for(var h=b.length,i=(e[1]-e[0]-g)/h,j=[],k=0;k<b.length;k++)0==k?j[k]=e[0]+g/2+i/2:j[k]=j[k-1]+i;return c=j,d=i,f=!0,a},a.rangeBands=function(e,g,h){g=g||0,h=h||0;for(var i=b.length,j=i-1,k=(e[1]-e[0])/j,l=[],m=0;m<b.length;m++)0==m?l[m]=e[0]:l[m]=k+l[m-1];return d=k,c=l,f=!1,a},a.rangeBand=function(){return d},a.invert=function(a){var b=Math.min(c[0],c[1]);if(f){b-=d/2;var e=a;b>e&&(e=b);var g=Math.abs(e-b)/d;return Math.floor(g)}var g=Math.abs(a-b)/d;return Math.ceil(g)},a};return a}),jui.define("util.scale.time",["util.math","util.time","util.scale.linear"],function(a,b,c){var d=function(){var a,d=[],e=c(),f=e.domain;return e.domain=function(a){if(!arguments.length)return f.call(e);for(var b=0;b<a.length;b++)d[b]=+a[b];return f.call(e,d)},e.min=function(){return Math.min(d[0],d[d.length-1])},e.max=function(){return Math.max(d[0],d[d.length-1])},e.rate=function(a,b){return e(e.max()*(a/b))},e.ticks=function(c,f){for(var g=d[0],h=d[1],i=[];h>g;)i.push(new Date(+g)),g=b.add(g,c,f);i.push(new Date(+g));var j=e(i[1]),k=e(i[2]);return a=k-j,i},e.realTicks=function(c,f){var g=d[0],h=d[1],i=[],j=new Date(+g),k=null;for(c==b.years?k=new Date(j.getFullYear(),0,1):c==b.months?k=new Date(j.getFullYear(),j.getMonth(),1):c==b.days||c==b.weeks?k=new Date(j.getFullYear(),j.getMonth(),j.getDate()):c==b.hours?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),0,0,0):c==b.minutes?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),0,0):c==b.seconds?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),0):c==b.milliseconds&&(k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),j.getMilliseconds())),k=b.add(k,c,f);+h>+k;)i.push(new Date(+k)),k=b.add(k,c,f);var l=e(i[1]),m=e(i[2]);return a=m-l,i},e.rangeBand=function(){return a},e.invert=function(a){var b=c().domain(e.range()).range(e.domain());return new Date(b(a))},e};return d}),jui.define("util.svg.element",[],function(){var a=function(){var b=[];this.create=function(a,b){this.element=document.createElementNS("http://www.w3.org/2000/svg",a),this.children=[],this.parent=null,this.styles={},this.attributes={},this.order=0,this.attr(b)},this.each=function(a){if("function"==typeof a){for(var b=0,c=this.children.length;c>b;b++){var d=this.children[b];a.apply(d,[b,d])}return this.children}},this.get=function(a){return this.children[a]?this.children[a]:null},this.index=function(a){for(var b=0;b<this.children.length;b++)if(a==this.children[b])return b;return-1},this.append=function(b){return b instanceof a&&(b.parent&&b.remove(),this.children.push(b),b.parent=this),this},this.prepend=function(a){return this.insert(0,a)},this.insert=function(a,b){return b.parent&&b.remove(),this.children.splice(a,0,b),b.parent=this,this},this.remove=function(){for(var a=0,b=[],c=this.parent.children,d=0;d<c.length;d++){if(c[d]==this){a=d;break}b.push(c[d])}return this.parent.children=b,this},this.attr=function(a){if("undefined"!=typeof a&&a){if("string"==typeof a)return this.attributes[a]||this.element.getAttribute(a);for(var b in a)this.attributes[b]=a[b],-1!=b.indexOf("xlink:")?this.element.setAttributeNS("http://www.w3.org/1999/xlink",b,a[b]):this.element.setAttribute(b,a[b]);return this}},this.css=function(a){var b=[];for(var c in a)this.styles[c]=a[c];for(var c in a)b.push(c+":"+a[c]);return this.attr({style:b.join(";")}),this},this.html=function(a){return this.element.innerHTML=a,this},this.text=function(a){for(var b=this.element.childNodes,c=0;c<b.length;c++)this.element.removeChild(b[c]);return this.element.appendChild(document.createTextNode(a)),this},this.on=function(a,c){var d=function(a){"function"==typeof c&&c.call(this,a)};return this.element.addEventListener(a,d,!1),b.push({type:a,callback:d}),this},this.off=function(a){if(a){for(var c=[],d=0,e=b.length;e>d;d++){var f=b[d];f.type!=a?c.push(f):this.element.removeEventListener(f.type,f.callback,!1)}b=c}else for(var d=0,e=b.length;e>d;d++){var f=b.shift();this.element.removeEventListener(f.type,f.callback,!1)}return this},this.hover=function(a,c){var d=function(b){"function"==typeof a&&a.call(this,b)},e=function(a){"function"==typeof c&&c.call(this,a)};return this.element.addEventListener("mouseover",d,!1),this.element.addEventListener("mouseout",e,!1),b.push({type:"mouseover",callback:d}),b.push({type:"mouseout",callback:e}),this},this.size=function(){var a={width:0,height:0},b=this.element.getBoundingClientRect();if(!b||0==b.width&&0==b.height){for(var c=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],d=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],e=window.getComputedStyle(this.element),f=0;f<c.length;f++)a.height+=parseFloat(e[c[f]]);for(var f=0;f<d.length;f++)a.width+=parseFloat(e[d[f]]);a.width=a.width||this.element.getAttribute("width"),a.height=a.height||this.element.getAttribute("height")}else a.width=b.width,a.height=b.height;return isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a},this.is=function(a){return this instanceof jui.include(a)}};return a}),jui.define("util.svg.element.transform",["util.base"],function(a){var b=function(){function b(a){var b=[];for(var c in d)d[c]&&b.push(d[c]);a.attr({transform:b.join(" ")})}function c(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b.join(",")}var d={translate:null,scale:null,rotate:null,skew:null,matrix:null};this.translate=function(){return d.translate="translate("+c(arguments)+")",b(this),this},this.rotate=function(a,c,e){if(1==arguments.length)var f=a;else if(3==arguments.length)var f=a+" "+c+","+e;return d.rotate="rotate("+f+")",b(this),this},this.scale=function(){return d.scale="scale("+c(arguments)+")",b(this),this},this.skew=function(){return d.skew="skew("+c(arguments)+")",b(this),this},this.matrix=function(){return d.matrix="matrix("+c(arguments)+")",b(this),this},this.data=function(b){var c=this.attr("transform"),d={translate:/[^translate()]+/g,rotate:/[^rotate()]+/g,scale:/[^scale()]+/g,skew:/[^skew()]+/g,matrix:/[^matrix()]+/g};return a.typeCheck("string",c)?c.match(d[b])[0]:null}};return b},"util.svg.element"),jui.define("util.svg.element.path",["util.base"],function(a){var b=function(){var b=[];this.moveTo=function(a,c,d){return b.push((d||"m")+a+","+c),this},this.MoveTo=function(a,b){return this.moveTo(a,b,"M")},this.lineTo=function(a,c,d){return b.push((d||"l")+a+","+c),this},this.LineTo=function(a,b){return this.lineTo(a,b,"L")},this.hLineTo=function(a,c){return b.push((c||"h")+a),this},this.HLineTo=function(a){return this.hLineTo(a,"H")},this.vLineTo=function(a,c){return b.push((c||"v")+a),this},this.VLineTo=function(a){return this.vLineTo(a,"V")},this.curveTo=function(a,c,d,e,f,g,h){return b.push((h||"c")+a+","+c+" "+d+","+e+" "+f+","+g),this},this.CurveTo=function(a,b,c,d,e,f){return this.curveTo(a,b,c,d,e,f,"C")},this.sCurveTo=function(a,c,d,e,f){return b.push((f||"s")+a+","+c+" "+d+","+e),this},this.SCurveTo=function(a,b,c,d){return this.sCurveTo(a,b,c,d,"S")},this.qCurveTo=function(a,c,d,e,f){return b.push((f||"q")+a+","+c+" "+d+","+e),this},this.QCurveTo=function(a,b,c,d){return this.qCurveTo(a,b,c,d,"Q")},this.tCurveTo=function(a,c,d,e,f){return b.push((f||"t")+a+","+c+" "+d+","+e),this},this.TCurveTo=function(a,b,c,d){return this.tCurveTo(a,b,c,d,"T")},this.arc=function(a,c,d,e,f,g,h,i){return e=e?1:0,f=f?1:0,b.push((i||"a")+a+","+c+" "+d+" "+e+","+f+" "+g+","+h),this},this.Arc=function(a,b,c,d,e,f,g){return this.arc(a,b,c,d,e,f,g,"A")},this.closePath=function(a){return b.push(a||"z"),this},this.ClosePath=function(){return this.closePath("Z")},this.join=function(){b.length>0&&(this.attr({d:b.join(" ")}),b=[])},this.length=function(){var c=a.createId(),d=b.join(" "),e=document.createElement("svg"),f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"id",c),f.setAttributeNS(null,"d",d),e.appendChild(f),document.body.appendChild(e);var g=document.getElementById(c).getTotalLength();return document.body.removeChild(e),g}};return b},"util.svg.element.transform"),jui.define("util.svg.element.path.rect",[],function(){var a=function(){this.round=function(a,b,c,d,e,f){c=c?c:0,d=d?d:0,e=e?e:0,f=f?f:0,this.MoveTo(0,c).Arc(c,c,0,0,1,c,0).HLineTo(a-d).Arc(d,d,0,0,1,a,d).VLineTo(b-e).Arc(e,e,0,0,1,a-e,b).HLineTo(f).Arc(f,f,0,0,1,0,b-f).ClosePath().join()}};return a},"util.svg.element.path"),jui.define("util.svg.element.path.symbol",[],function(){var a=function(){var a="";this.template=function(a,b){var c=a,d=half_r=a/2,e=b/2,f="a"+half_r+","+half_r+" 0 1,1 "+c+",0",g="a"+half_r+","+half_r+" 0 1,1 "+-c+",0",h={triangle:["m0,"+-e,"l"+d+","+b,"l"+-a+",0","l"+d+","+-b].join(" "),rect:["m"+-d+","+-e,"l"+a+",0","l0,"+b,"l"+-a+",0","l0,"+-b].join(" "),cross:["m"+-d+","+-e,"l"+a+","+b,"m0,"+-b,"l"+-a+","+b].join(" "),circle:["m"+-c+",0",f,g].join(" ")};return h.rectangle=h.rect,h},this.join=function(){a.length>0&&(this.attr({d:a}),a="")},this.add=function(b,c,d){a+=" M"+b+","+c+d},this.triangle=function(a,b,c,d){return this.MoveTo(a,b).moveTo(0,-d/2).lineTo(c/2,d).lineTo(-c,0).lineTo(c/2,-d)},this.rect=this.rectangle=function(a,b,c,d){return this.MoveTo(a,b).moveTo(-c/2,-d/2).lineTo(c,0).lineTo(0,d).lineTo(-c,0).lineTo(0,-d)},this.cross=function(a,b,c,d){return this.MoveTo(a,b).moveTo(-c/2,-d/2).lineTo(c,d).moveTo(0,-d).lineTo(-c,d)},this.circle=function(a,b,c){return this.MoveTo(a,b).moveTo(-c,0).arc(c/2,c/2,0,1,1,c,0).arc(c/2,c/2,0,1,1,-c,0)}};return a},"util.svg.element.path"),jui.define("util.svg.element.poly",[],function(){var a=function(){var a=[];this.point=function(b,c){return a.push(b+","+c),this},this.join=function(){if(a.length>0){var b=a[0];a.push(b),this.attr({points:a.join(" ")}),a=[]}}};return a},"util.svg.element.transform"),jui.define("util.svg.base",["util.base","util.math","util.color","util.svg.element","util.svg.element.transform","util.svg.element.path","util.svg.element.path.symbol","util.svg.element.path.rect","util.svg.element.poly"],function(a,b,c,d,e,f,g,h,i){var j=null,k=function(){this.create=function(a,b,c,d){return a.create(b,c),a},this.createChild=function(a,b,c,d){return this.create(a,b,c,d)},this.custom=function(a,b,c){return this.create(new d,a,b,c)},this.defs=function(a){return this.create(new d,"defs",null,a)},this.symbol=function(a,b){return this.create(new d,"symbol",a,b)},this.g=this.group=function(a,b){return this.create(new e,"g",a,b)},this.marker=function(a,b){return this.create(new d,"marker",a,b)},this.a=function(a,b){return this.create(new e,"a",a,b)},this["switch"]=function(a,b){return this.create(new d,"switch",a,b)},this.use=function(a){return this.create(new d,"use",a)},this.rect=function(a,b){return this.create(new e,"rect",a,b)},this.line=function(a,b){return this.create(new e,"line",a,b)},this.circle=function(a,b){return this.create(new e,"circle",a,b)},this.text=function(b,c){return 2==arguments.length?a.typeCheck("function",c)?this.create(new e,"text",b,c):this.create(new e,"text",b).text(c):this.create(new e,"text",b)},this.textPath=function(b,c){return a.typeCheck("string",c)?this.create(new d,"textPath",b).text(c):this.create(new d,"textPath",b)},this.tref=function(b,c){return a.typeCheck("string",c)?this.create(new d,"tref",b).text(c):this.create(new d,"tref",b)},this.tspan=function(b,c){return a.typeCheck("string",c)?this.create(new d,"tspan",b).text(c):this.create(new d,"tspan",b)},this.ellipse=function(a,b){return this.create(new e,"ellipse",a,b)},this.image=function(a,b){return this.create(new e,"image",a,b)},this.path=function(a,b){return this.create(new f,"path",a,b)},this.pathSymbol=function(a,b){return this.create(new g,"path",a,b)},this.pathRect=function(a,b){return this.create(new h,"path",a,b)},this.polyline=function(a,b){return this.create(new i,"polyline",a,b)},this.polygon=function(a,b){return this.create(new i,"polygon",a,b)},this.pattern=function(a,b){return this.create(new d,"pattern",a,b)},this.mask=function(a,b){return this.create(new d,"mask",a,b)},this.clipPath=function(a,b){return this.create(new d,"clipPath",a,b)},this.linearGradient=function(a,b){return this.create(new d,"linearGradient",a,b)},this.radialGradient=function(a,b){return this.create(new d,"radialGradient",a,b)},this.filter=function(a,b){return this.create(new d,"filter",a,b)},this.foreignObject=function(a,b){return this.create(new e,"foreignObject",a,b)},this.stop=function(a){return this.createChild(new d,"stop",a)},this.animate=function(a){return this.createChild(new d,"animate",a)},this.animateColor=function(a){return this.createChild(new d,"animateColor",a)},this.animateMotion=function(a){return this.createChild(new d,"animateMotion",a)},this.animateTransform=function(a){return this.createChild(new d,"animateTransform",a)},this.mpath=function(a){return this.createChild(new d,"mpath",a)},this.set=function(a){return this.createChild(new d,"set",a)},this.feBlend=function(a){return this.createChild(new d,"feBlend",a)},this.feColorMatrix=function(a){return this.createChild(new d,"feColorMatrix",a)},this.feComponentTransfer=function(a){return this.createChild(new d,"feComponentTransfer",a)},this.feComposite=function(a){return this.createChild(new d,"feComposite",a)},this.feConvolveMatrix=function(a){return this.createChild(new d,"feConvolveMatrix",a)},this.feDiffuseLighting=function(a){return this.createChild(new d,"feDiffuseLighting",a)},this.feDisplacementMap=function(a){return this.createChild(new d,"feDisplacementMap",a)},this.feFlood=function(a){return this.createChild(new d,"feFlood",a)},this.feGaussianBlur=function(a){return this.createChild(new d,"feGaussianBlur",a)},this.feImage=function(a){return this.createChild(new d,"feImage",a)},this.feMerge=function(a,b){return this.createChild(new d,"feMerge",a,b)},this.feMergeNode=function(a){return this.createChild(new d,"feMergeNode",a)},this.feMorphology=function(a){return this.createChild(new d,"feMorphology",a)},this.feOffset=function(a){return this.createChild(new d,"feOffset",a)},this.feSpecularLighting=function(a){return this.createChild(new d,"feSpecularLighting",a)},this.feTile=function(a){return this.createChild(new d,"feTile",a)},this.feTurbulence=function(a){return this.createChild(new d,"feTurbulence",a)}};return k.create=function(a,b,c){return null==j&&(j=new k),j.custom(a,b,c)},k}),jui.define("util.svg.base3d",["util.base","util.math","util.color"],function(a,b,c){var d=function(){this.rect3d=function(a,d,e,f,g){var h=this,i=b.radian(f),j=0,k=0,l=d,m=e,n=Math.cos(i)*g,o=Math.sin(i)*g,p=d+n,q=e+o,r=h.group({},function(){h.path({fill:c.lighten(a,.15),stroke:c.lighten(a,.15)}).MoveTo(n,j).LineTo(p,k).LineTo(l,o).LineTo(j,o),h.path({fill:a,stroke:a}).MoveTo(j,o).LineTo(j,q).LineTo(l,q).LineTo(l,o),h.path({fill:c.darken(a,.2),stroke:c.darken(a,.2)}).MoveTo(l,q).LineTo(p,m).LineTo(p,k).LineTo(l,o)});return r},this.cylinder3d=function(d,e,f,g,h,i){var j=this,k=b.radian(g),i=void 0==i?1:0==i?.01:i,l=e/2,m=l*i,n=Math.cos(k)*h/2,o=Math.sin(k)*h/2,p=a.createId("cylinder3d"),q=j.group({},function(){j.ellipse({fill:c.darken(d,.05),"fill-opacity":.85,stroke:c.darken(d,.05),rx:l,ry:o,cx:l,cy:f}).translate(n,o),j.path({fill:"url(#"+p+")","fill-opacity":.85,stroke:d}).MoveTo(l-m,o).LineTo(0,f).Arc(l,o,0,0,0,e,f).LineTo(l+m,o).Arc(l+m,o,0,0,1,l-m,o).translate(n,o),j.ellipse({fill:c.lighten(d,.2),"fill-opacity":.95,stroke:c.lighten(d,.2),rx:l*i,ry:o*i,cx:l,cy:o}).translate(n,o),j.linearGradient({id:p,x1:"100%",x2:"0%",y1:"0%",y2:"0%"},function(){j.stop({offset:"0%","stop-color":c.lighten(d,.15)}),j.stop({offset:"33.333333333333336%","stop-color":c.darken(d,.2)}),j.stop({offset:"66.66666666666667%","stop-color":c.darken(d,.2)}),j.stop({offset:"100%","stop-color":c.lighten(d,.15)})})});return q}};return d},"util.svg.base"),jui.define("util.svg",["util.base","util.math","util.color","util.svg.element","util.svg.element.transform","util.svg.element.path","util.svg.element.path.symbol","util.svg.element.path.rect","util.svg.element.poly"],function(a,b,c,d,e,f,g,h,i){var j=function(b,c){function g(){l.root=m=new d,n=new e,o=new e,m.create("svg",c),n.create("g"),o.create("g"),n.translate(.5,.5),o.translate(.5,.5),b.appendChild(m.element),m.append(n),m.append(o)}function h(a){var b=a.children;k(b)&&b.sort(function(a,b){return a.order-b.order});for(var c=0,d=b.length;d>c;c++){var e=b[c];e&&(e.children.length>0&&h(e),(e instanceof f||e instanceof i)&&e.join(),e.parent==a&&a.element.appendChild(e.element))}}function j(a){for(var b=a.children,c=0,d=b.length;d>c;c++){var e=b[c];e&&(e.off(),e.children.length>0&&j(e))}}function k(a){for(var b=0,c=a.length;c>b;b++)if(a[b].order>0)return!0;return!1}var l=this,m=null,n=null,o=null,p={},q=0,r=!1;this.create=function(b,c,d,e){return b.create(c,d),0==q?n.append(b):p[q].append(b),a.typeCheck("function",e)&&(q++,p[q]=b,e.call(b),q--),b},this.createChild=function(a,b,c,d){if(a.parent==n)throw new Error("JUI_CRITICAL_ERR: Parents are required elements of the '"+b+"'");return this.create(a,b,c,d)},this.size=function(){if(2!=arguments.length)return m.size();var a=arguments[0],b=arguments[1];m.attr({width:a,height:b})},this.clear=function(a){n.each(function(){this.element.parentNode&&n.element.removeChild(this.element)}),j(n),a===!0&&(o.each(function(){this.element.parentNode&&o.element.removeChild(this.element)}),j(o))},this.reset=function(a){this.clear(a),n.children=[],a===!0&&(o.children=[])},this.render=function(a){this.clear(),h(r===!1||a===!0?m:n),r=!0},this.download=function(b){a.typeCheck("string",b)&&(b=b.split(".")[0]);var c=document.createElement("a");c.download=b?b+".svg":"svg.svg",c.href=this.toDataURI(),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)},this.downloadImage=function(b,c){c=c||"image/png";var d=new Image,e=this.size(),f=this.toDataURI().replace('width="100%"','width="'+e.width+'"').replace('height="100%"','height="'+e.height+'"');d.onload=function(){var e=document.createElement("canvas");e.width=d.width,e.height=d.height;var f=e.getContext("2d");f.drawImage(d,0,0);var g=e.toDataURL(c);a.typeCheck("string",b)&&(b=b.split(".")[0]);var h=document.createElement("a");h.download=b?b+".png":"svg.png",h.href=g,document.body.appendChild(h),h.click(),h.parentNode.removeChild(h)},d.src=f},this.exportCanvas=function(a){var b=new Image,c=this.size(),d=this.toDataURI().replace('width="100%"','width="'+c.width+'"').replace('height="100%"','height="'+c.height+'"');b.onload=function(){a.width=b.width,a.height=b.height;var c=a.getContext("2d");c.drawImage(b,0,0)},b.src=d},this.toXML=function(){var a=b.innerHTML;return a=a.replace('xmlns="http://www.w3.org/2000/svg"',""),['<?xml version="1.0" encoding="utf-8"?>',a.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" ')].join("\n")},this.toDataURI=function(){var b=this.toXML();return(a.browser.mozilla||a.browser.msie)&&(b=encodeURIComponent(b)),a.browser.msie?"data:image/svg+xml,"+b:"data:image/svg+xml;utf8,"+b},this.autoRender=function(a,b){q>0||(b?n.append(a):o.append(a))},this.getTextSize=function(a){if(""==a)return{width:0,height:0};var b=document.createElementNS("http://www.w3.org/2000/svg","text");b.setAttributeNS(null,"x",-200),b.setAttributeNS(null,"y",-200),b.appendChild(document.createTextNode(a)),m.element.appendChild(b);var c=b.getBoundingClientRect();return m.element.removeChild(b),{width:c.width,height:c.height}},g()};return j.createObject=function(a){var b=new d;if(b.create(a.type,a.attr),a.children instanceof Array)for(var c=0,e=a.children.length;e>c;c++)b.append(j.createObject(a.children[c]));return b},j},"util.svg.base3d"),jui.define("manager",["util.base"],function(a){var b=new function(){var c=[],d=[];this.add=function(a){c.push(a)},this.emit=function(a,b,d){for(var e=[],f=0;f<c.length;f++){var g=c[f];(a==g.selector||a==g.type)&&e.push(g)}for(var f=0;f<e.length;f++)for(var g=e[f],h=0;h<g.length;h++)g[h].emit(b,d)},this.get=function(b){if(a.typeCheck("integer",b))return c[b];if(a.typeCheck("string",b)){for(var d=0;d<c.length;d++){var e=c[d];if(b==e.selector)return 1==e.length?e[0]:e}for(var f=[],d=0;d<c.length;d++){var e=c[d];b==e.type&&f.push(e)}return f}},this.getAll=function(){return c},this.remove=function(b){return a.typeCheck("integer",b)?c.splice(b,1)[0]:void 0},this.shift=function(){return c.shift()},this.pop=function(){return c.pop()},this.size=function(){return c.length},this.debug=function(b,c,d,e){if(b.__proto__){var f=["emit","on","addEvent","addValid","callBefore","callAfter","callDelay","setTpl","setVo","setOption"];for(var g in b){var h=b[g];"function"==typeof h&&-1==a.inArray(g,f)&&!function(a,d,f,g){b.__proto__[a]=function(){var b=Date.now(),h=d.apply(this,arguments),i=Date.now();return"function"==typeof e?e({type:jui.get(c).type,name:a,c_index:f,u_index:g,time:i-b},arguments):(isNaN(f)||isNaN(g)?console.log("NAME("+a+"), TIME("+(i-b)+"ms), ARGUMENTS..."):console.log("TYPE("+jui.get(c).type+"), NAME("+a+"), INDEX("+f+":"+g+"), TIME("+(i-b)+"ms), ARGUMENTS..."),console.log(arguments),console.log("")),h}}(g,h,c,d)}}},this.debugAll=function(a){for(var b=0;b<c.length;b++)for(var d=c[b],e=0;e<d.length;e++)this.debug(d[e],b,e,a)},this.addClass=function(a){d.push(a)},this.getClass=function(b){if(a.typeCheck("integer",b))return d[b];if(a.typeCheck("string",b))for(var c=0;c<d.length;c++)if(b==d[c].type)return d[c];return null},this.getClassAll=function(){return d},this.create=function(c,d,e){var f=b.getClass(c);if(a.typeCheck("null",f))throw new Error("JUI_CRITICAL_ERR: '"+c+"' does not exist");return f["class"](d,e)}};return b}),jui.define("collection",[],function(){var a=function(a,b,c,d){this.type=a,this.selector=b,this.options=c,this.destroy=function(){for(var a=0;a<d.length;a++)d[a].destroy()};for(var e=0;e<d.length;e++)this.push(d[e])};return a.prototype=Object.create(Array.prototype),a}),jui.define("core",["util.base","util.dom","manager","collection"],function(a,b,c,d){var e=function(){this.emit=function(b,c){if(a.typeCheck("string",b)){for(var d,e=0;e<this.event.length;e++){var f=this.event[e];if(f.type==b.toLowerCase()){var g=a.typeCheck("array",c)?c:[c];d=f.callback.apply(this,g)}}return d}},this.on=function(b,c){a.typeCheck("string",b)&&a.typeCheck("function",c)&&this.event.push({type:b.toLowerCase(),callback:c,unique:!1})},this.off=function(b){for(var c=[],d=0;d<this.event.length;d++){var e=this.event[d];(a.typeCheck("function",b)&&e.callback!=b||a.typeCheck("string",b)&&e.type!=b.toLowerCase())&&c.push(e)}this.event=c},this.addValid=function(b,c){if(this.__proto__){var d=this.__proto__[b];this.__proto__[b]=function(){for(var e=arguments,f=0;f<e.length;f++)if(!a.typeCheck(c[f],e[f]))throw new Error("JUI_CRITICAL_ERR: the "+f+"th parameter is not a "+c[f]+" ("+b+")");return d.apply(this,e)}}},this.callBefore=function(b,c){if(this.__proto__){var d=this.__proto__[b];this.__proto__[b]=function(){var b=arguments;return a.typeCheck("function",c)?c.apply(this,b)!==!1?d.apply(this,b):void 0:d.apply(this,b)}}},this.callAfter=function(b,c){if(this.__proto__){var d=this.__proto__[b];this.__proto__[b]=function(){var b=arguments,e=d.apply(this,b);return a.typeCheck("function",c)&&e!==!1&&c.apply(this,b),e}}},this.callDelay=function(b,c){function d(b,d){var f=e.apply(b,d);a.typeCheck("function",c.after)&&f!==!1&&c.after.apply(b,d)}if(this.__proto__){var e=this.__proto__[b],f=isNaN(c.delay)?0:c.delay;this.__proto__[b]=function(){var b=this,e=arguments;a.typeCheck("function",c.before)&&c.before.apply(b,e),f>0?setTimeout(function(){d(b,e)},f):d(b,e)}}},this.setTpl=function(b,c){this.tpl[b]=a.template(c)},this.setOption=function(b,c){if(a.typeCheck("object",b))for(var d in b)this.options[d]=b[d];else this.options[b]=c},this.destroy=function(){if(this.__proto__)for(var a in this.__proto__)delete this.__proto__[a]}};return e.build=function(e){return function(f,g){var h=[],i=[];a.typeCheck("string",f)?i=b.find(f):a.typeCheck("object",f)?i.push(f):i.push(document.createElement("div"));for(var j=0,k=i.length;k>j;j++)h[j]=jui.createUIObject(e,f,j,i[j],g);return c.add(new d(e.type,f,g,h)),0==h.length?null:1==h.length?h[0]:h}},e.init=function(a){var b=null;return"object"==typeof a&&(b=e.build(a),c.addClass({type:a.type,"class":b})),b},e.setup=function(){return{tpl:{},event:{}}},window.jui="object"==typeof jui?a.extend(jui,c,!0):c,e}),jui.define("event",["jquery","util.base","manager","collection"],function(a,b,c,d){var e=function(){function c(b){for(var c=["webkit","moz","MS","o",""],d=0;d<c.length;d++){var e=b.type;c[d]||(e=e.toLowerCase()),a(b.target).on(c[d]+e,b.callback)}g.push(b)}function d(b){
b.callback&&!b.children?a(b.target).on(b.type,b.callback):a(b.target).on(b.type,b.children,b.callback),g.push(b)}function e(b){b.callback&&!b.children?a(b.target).on(f(b.type),b.callback):a(b.target).on(f(b.type),b.children,b.callback),g.push(b)}function f(a){return{click:"touchstart",dblclick:"touchend",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}[a]}var g=[];this.add=function(f){var g={target:f[0],type:f[1]};b.typeCheck("function",f[2])?g=a.extend(g,{callback:f[2]}):b.typeCheck("string",f[2])&&(g=a.extend(g,{children:f[2],callback:f[3]}));for(var h=b.typeCheck("array",g.type)?g.type:[g.type],i=0;i<h.length;i++)g.type=h[i],-1!=g.type.toLowerCase().indexOf("animation")?c(g):("body"!=g.target&&g.target!=window&&g.target!=document&&a(g.target).off(g.type),b.isTouch?e(g):d(g))},this.trigger=function(c,d){a(c).trigger(b.isTouch?f(d):d)},this.get=function(a){return g[a]},this.getAll=function(){return g},this.size=function(){return g.length}},f=function(){var b=null;this.find=function(b){return a(this.root).find(b)},this.addEvent=function(){this.listen.add(arguments)},this.addTrigger=function(a,b){this.listen.trigger(a,b)},this.setVo=function(){this.options.vo&&(null!=b&&b.reload(),b=a(this.selector).jbinder(),this.bind=b)},this.destroy=function(){for(var b=0;b<this.listen.size();b++){var c=this.listen.get(b);a(c.target).off(c.type)}if(this.__proto__)for(var d in this.__proto__)delete this.__proto__[d]}};return f.build=function(b){return function(f,g){var h=[],i=a(f||"<div />");return i.each(function(c){h[c]=jui.createUIObject(b,i.selector,c,this,g,function(b,c){b.init.prototype.listen=new e,a("script").each(function(b){if(f==a(this).data("jui")||f==a(this).data("vo")||f instanceof HTMLElement){var d=a(this).data("tpl");if(""==d)throw new Error("JUI_CRITICAL_ERR: 'data-tpl' property is required");c.tpl[d]=a(this).html()}})})}),c.add(new d(b.type,f,g,h)),0==h.length?null:1==h.length?h[0]:h}},f.init=function(a){var b=null;return"object"==typeof a&&(b=f.build(a),c.addClass({type:a.type,"class":b})),b},f.setup=function(){return{vo:null}},f},"core");