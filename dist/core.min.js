!function(o,t){var a={jquery:"undefined"!=typeof jQuery?jQuery:null},u={},c={},r={template:{evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g},logUrl:"tool/debug.html"},h=a["util.base"]={browser:{webkit:"WebkitAppearance"in document.documentElement.style,mozilla:void 0!==o.mozInnerScreenX,msie:-1!=o.navigator.userAgent.indexOf("Trident")},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o.navigator.userAgent),inherit:function(t,e){this.typeCheck("function",t)&&this.typeCheck("function",e)&&(t.parent=e,t.prototype=new e,(t.prototype.constructor=t).prototype.parent=t.prototype,t.prototype.super=function(t,e){return this.constructor.prototype[t].apply(this,e)})},extend:function(t,e,n){if(this.typeCheck(["object","function"],t)||(t={}),!this.typeCheck(["object","function"],e))return t;for(var r in e)!0===n?i(t[r])?this.extend(t[r],e[r],n):this.typeCheck("undefined",t[r])&&(t[r]=e[r]):i(t[r])?this.extend(t[r],e[r],n):t[r]=e[r];function i(t){return h.typeCheck("object",t)}return t},pxToInt:function(t){return this.typeCheck("string",t)&&-1!=t.indexOf("px")?parseInt(t.split("px").join("")):t},clone:function(t){var e=this.typeCheck("array",t)?[]:{};for(var n in t)this.typeCheck("object",t[n])?e[n]=this.clone(t[n]):e[n]=t[n];return e},deepClone:function(t,e){var n=null;if(e=e||{},this.typeCheck("array",t)){n=new Array(t.length);for(var r=0,i=t.length;r<i;r++)n[r]=this.deepClone(t[r],e)}else if(this.typeCheck("date",t))n=t;else if(this.typeCheck("object",t))for(var o in n={},t)e[o]?n[o]=t[o]:n[o]=this.deepClone(t[o],e);else n=t;return n},sort:function(t){return new(jui.include("util.sort"))(t)},runtime:function(t,e){var n=(new Date).getTime();e();var r=(new Date).getTime();console.log(t+" : "+(r-n)+"ms")},template:function(t,e){var n=jui.include("util.template");return n(t,e||null,r.template)},resize:function(t,e){var n,r=(n=0,function(){clearTimeout(n),n=setTimeout(t,e)});o.addEventListener?o.addEventListener("resize",r):object.attachEvent?o.attachEvent("onresize",r):o.onresize=r},index:function(){return new(jui.include("util.keyparser"))},chunk:function(t,e){for(var n=[],r=0,i=t.length;r<i;)n.push(t.slice(r,r+=e));return n},typeCheck:function(t,e){function n(t,e){return"string"==typeof t&&("string"==t?"string"==typeof e:"integer"==t?"number"==typeof e&&e%1==0:"float"==t?"number"==typeof e&&e%1!=0:"number"==t?"number"==typeof e:"boolean"==t?"boolean"==typeof e:"undefined"==t?void 0===e:"null"==t?null===e:"array"==t?e instanceof Array:"date"==t?e instanceof Date:"function"==t?"function"==typeof e:"object"==t&&!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof RegExp))}if("object"==typeof t&&t.length){for(var r=t,i=0;i<r.length;i++)if(n(r[i],e))return!0;return!1}return n(t,e)},typeCheckObj:function(t,o){if("object"==typeof t){var a=this;for(var e in t){var n=t[e];"function"==typeof n&&function(r,i){t[r]=function(){for(var t=arguments,e=o[r],n=0;n<t.length;n++)if(!a.typeCheck(e[n],t[n]))throw new Error("JUI_CRITICAL_ERR: the "+n+"th parameter is not a "+e[n]+" ("+name+")");return i.apply(this,t)}}(e,n)}}},dataToCsv:function(t,e,n){for(var r="",i=n||e.length,o=-1;o<i;o++){for(var a=[],u=0;u<t.length;u++)if(t[u])if(-1==o)a.push('"'+t[u]+'"');else{var c=e[o][t[u]];a.push(isNaN(c)?'"'+c+'"':c)}r+=a.join(",")+"\n"}return r},dataToCsv2:function(t){for(var e="",n=this.extend({fields:null,rows:null,names:null,types:null,count:this.typeCheck("integer",t.count)?t.count:t.rows.length},t),r=-1;r<n.count;r++){for(var i=[],o=0;o<n.fields.length;o++)if(n.fields[o])if(-1==r)n.names&&n.names[o]?i.push('"'+n.names[o]+'"'):i.push('"'+n.fields[o]+'"');else{var a=n.rows[r][n.fields[o]];this.typeCheck("array",n.types)?"string"==n.types[o]?i.push('"'+a+'"'):"integer"==n.types[o]?i.push(parseInt(a)):"float"==n.types[o]?i.push(parseFloat(a)):i.push(a):i.push(isNaN(a)?'"'+a+'"':a)}e+=i.join(",")+"\n"}return e},fileToCsv:function(t,e){var n=new FileReader;n.onload=function(t){h.typeCheck("function",e)&&e(t.target.result)},n.readAsText(t)},csvToBase64:function(t){return"data:application/octet-stream;base64,"+jui.include("util.base64").encode(t)},csvToData:function(t,e,n){for(var r=[],i=e.split("\n"),o=1;o<i.length;o++)if(""!=i[o]){for(var a=i[o].split(","),u={},c=0;c<t.length;c++)u[t[c]]=a[c],this.startsWith(a[c],'"')&&this.endsWith(a[c],'"')?u[t[c]]=a[c].split('"').join(""):u[t[c]]=a[c],-1!=this.inArray(t[c],n)&&(u[t[c]]=parseFloat(a[c]));r.push(u)}return r},getCsvFields:function(t,e){for(var n=this.typeCheck("array",e)?e:t,r=0;r<n.length;r++)isNaN(n[r])||(n[r]=t[n[r]]);return n},svgToBase64:function(t){return"data:image/svg+xml;base64,"+jui.include("util.base64").encode(t)},dateFormat:function(t,e,n){var r=["\0","January","February","March","April","May","June","July","August","September","October","November","December"],i=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function u(t,e){var n=t+"";for(e=e||2;n.length<e;)n="0"+n;return n}var c=n?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var f=(n?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+r[0])).replace(/(^|[^\\])MMM/g,"$1"+i[0])).replace(/(^|[^\\])MM/g,"$1"+u(f))).replace(/(^|[^\\])M/g,"$1"+f);var l=n?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+a[0])).replace(/(^|[^\\])dd/g,"$1"+u(l))).replace(/(^|[^\\])d/g,"$1"+l);var s=n?t.getUTCHours():t.getHours(),h=12<s?s-12:0==s?12:s;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+u(s))).replace(/(^|[^\\])H/g,"$1"+s)).replace(/(^|[^\\])hh+/g,"$1"+u(h))).replace(/(^|[^\\])h/g,"$1"+h);var p=n?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+u(p))).replace(/(^|[^\\])m/g,"$1"+p);var d=n?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+u(d))).replace(/(^|[^\\])s/g,"$1"+d);var y=n?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+u(y,3)),y=Math.round(y/10),e=e.replace(/(^|[^\\])ff/g,"$1"+u(y)),y=Math.round(y/10);var g=s<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+y)).replace(/(^|[^\\])TT+/g,"$1"+g)).replace(/(^|[^\\])T/g,"$1"+g.charAt(0));var v=g.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+v)).replace(/(^|[^\\])t/g,"$1"+v.charAt(0));var m=-t.getTimezoneOffset(),C=n||!m?"Z":0<m?"+":"-";if(!n){var b=(m=Math.abs(m))%60;C+=u(Math.floor(m/60))+":"+u(b)}e=e.replace(/(^|[^\\])K/g,"$1"+C);var _=(n?t.getUTCDay():t.getDay())+1;return e=(e=(e=(e=(e=e.replace(new RegExp(o[0],"g"),o[_])).replace(new RegExp(a[0],"g"),a[_])).replace(new RegExp(r[0],"g"),r[f])).replace(new RegExp(i[0],"g"),i[f])).replace(/\\(.)/g,"$1")},createId:function(t){return[t||"id",+new Date,Math.round(100*Math.random())%100].join("-")},btoa:function(t){return jui.include("util.base64").encode(t)},atob:function(t){return jui.include("util.base64").decode(t)},timeLoop:function(t,i){return function(n,r){!function t(e){e<1||(1==e?(n.call(i,e),r.call(i)):setTimeout(function(){-1<e&&n.call(i,e--),-1<e&&t(e)},1))}(t)}},loop:function(t,s){var h=t,p=Math.ceil(t/5);return function(t){for(var e=0,n=1*p,r=2*p,i=3*p,o=4*p,a=n,u=r,c=i,f=o,l=h;e<a&&e<h;)t.call(s,e,1),e++,n<u&&n<h&&(t.call(s,n,2),n++),r<c&&r<h&&(t.call(s,r,3),r++),i<f&&i<h&&(t.call(s,i,4),i++),o<l&&o<h&&(t.call(s,o,5),o++)}},loopArray:function(s,h){var t=s.length,p=t,d=Math.ceil(t/5);return function(t){for(var e=0,n=1*d,r=2*d,i=3*d,o=4*d,a=n,u=r,c=i,f=o,l=p;e<a&&e<p;)t.call(h,s[e],e,1),e++,n<u&&n<p&&(t.call(h,s[n],n,2),n++),r<c&&r<p&&(t.call(h,s[r],r,3),r++),i<f&&i<p&&(t.call(h,s[i],i,4),i++),o<l&&o<p&&(t.call(h,s[o],o,5),o++)}},makeIndex:function(t,r){var i={};return this.loopArray(t)(function(t,e){var n=t[r];void 0===i[n]&&(i[n]=[]),i[n].push(e)}),i},startsWith:function(t,e,n){return n=n||0,t.lastIndexOf(e,n)===n},endsWith:function(t,e,n){var r=t;(void 0===n||n>r.length)&&(n=r.length),n-=e.length;var i=r.indexOf(e,n);return-1!==i&&i===n},inArray:function(t,e){if(this.typeCheck(["undefined","null"],t)||!this.typeCheck("array",e))return-1;for(var n=0,r=e.length;n<r;n++)if(e[n]==t)return n;return-1},trim:function(t){var e="[\\x20\\t\\r\\n\\f]",n=new RegExp("^"+e+"+|((?:^|[^\\\\])(?:\\\\.)*)"+e+"+$","g");return null==t?"":(t+"").replace(n,"")},ready:function(){var e,n,r={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},l={isReady:!1,readyWait:1,holdReady:function(t){t?l.readyWait++:l.ready(!0)},ready:function(t){if(!0===t&&!--l.readyWait||!0!==t&&!l.isReady){if(!document.body)return setTimeout(l.ready,1);if((l.isReady=!0)!==t&&0<--l.readyWait)return;e.resolveWith(document,[l])}},bindReady:function(){if(!e){if(e=l._Deferred(),"complete"===document.readyState)return setTimeout(l.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),o.addEventListener("load",l.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",n),o.attachEvent("onload",l.ready);var t=!1;try{t=null==o.frameElement}catch(t){}document.documentElement.doScroll&&t&&i()}}},_Deferred:function(){var a,n,u,c=[],f={done:function(){if(!u){var t,e,n,r,i,o=arguments;for(a&&(i=a,a=0),t=0,e=o.length;t<e;t++)n=o[t],"array"===(r=l.type(n))?f.done.apply(f,n):"function"===r&&c.push(n);i&&f.resolveWith(i[0],i[1])}return this},resolveWith:function(t,e){if(!u&&!a&&!n){e=e||[],n=1;try{for(;c[0];)c.shift().apply(t,e)}finally{a=[t,e],n=0}}return this},resolve:function(){return f.resolveWith(this,arguments),this},isResolved:function(){return!(!n&&!a)},cancel:function(){return u=1,c=[],this}};return f},type:function(t){return null==t?String(t):r[Object.prototype.toString.call(t)]||"object"}};function i(){if(!l.isReady){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(i,1)}l.ready()}}return document.addEventListener?n=function(){document.removeEventListener("DOMContentLoaded",n,!1),l.ready()}:document.attachEvent&&(n=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),l.ready())}),function(t){l.bindReady(),l.type(t),e.done(t)}}(),param:function(t){var e,n,r=[];for(var i in t)n=t[e=i],n=h.typeCheck("function",n)?n():null==n?"":n,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(n);return r.join("&").replace(/%20/g,"+")},ajax:function(t){var e=null,n="",r=null,i=h.extend({url:null,type:"GET",data:null,async:!0,success:null,fail:null},t);if(this.typeCheck("string",i.url)&&this.typeCheck("function",i.success)){if(this.typeCheck("object",i.data)&&(n=this.param(i.data)),this.typeCheck("undefined",XMLHttpRequest))for(var o=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],a=0,u=o.length;a<u;a++)try{e=new ActiveXObject(o[a]);break}catch(t){}else e=new XMLHttpRequest;null!=e&&(e.open(i.type,i.url,i.async),e.send(n),r=function(){4===e.readyState&&200==e.status?i.success(e):h.typeCheck("function",i.fail)&&i.fail(e)},i.async?e.onreadystatechange=r:r())}},scrollWidth:function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var r=t.offsetWidth;return n==r&&(r=e.clientWidth),document.body.removeChild(e),n-r}},f=function(t){for(var e=[],n=0;n<t.length;n++){var r=a[t[n]];if(h.typeCheck(["function","object"],r))e.push(r);else{var i=l(t[n]);null==i?(console.log("JUI_WARNING_MSG: '"+t[n]+"' is not loaded"),e.push(null)):e.push(i)}}return e},l=function(t){var e=null;t+=".";for(var n in a)if(-1!=n.indexOf(t)&&h.typeCheck(["function","object"],a[n])){var r=n.split(t).join("");-1==r.indexOf(".")&&(null==e&&(e={}),e[r]=a[n])}return e};o.jui=t.jui={ready:function(){var n=[],r=2==arguments.length?arguments[1]:arguments[0],i=2==arguments.length?arguments[0]:null;if(!h.typeCheck(["array","null"],i)||!h.typeCheck("function",r))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");h.ready(function(){if(i)n=f(i);else{var t=l("ui"),e={};h.extend(e,t),h.extend(e,l("grid")),n=[t,e,h]}r.apply(null,n)})},defineUI:function(t,e,n,r){if(!(h.typeCheck("string",t)&&h.typeCheck("array",e)&&h.typeCheck("function",n)&&h.typeCheck(["string","undefined"],r)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(h.typeCheck("function",c[t]))throw new Error("JUI_CRITICAL_ERR: '"+t+"' is already exist");if(h.typeCheck("undefined",r)&&(r="event"),!h.typeCheck("function",c[r]))throw new Error("JUI_CRITICAL_ERR: Parents are the only function");if(!0!==u[r])throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");var i=f(e),o=n.apply(null,i);h.inherit(o,c[r]),a[t]=c["core"!=r?"event":"core"].init({type:t,class:o}),c[t]=o,u[t]=!0},redefineUI:function(t,e,n,r,i){i||!0!==u[t]||(a[t]=null,c[t]=null,u[t]=!1),(!i||i&&!0!==u[t])&&this.defineUI(t,e,n,r)},createUIObject:function(t,e,n,r,i,o){var a=new t.class,u=jui.defineOptions(t.class,i||{});for(var c in(a.init.prototype=a).init.prototype.selector=e,a.init.prototype.root=r,a.init.prototype.options=u,a.init.prototype.tpl={},a.init.prototype.event=new Array,a.init.prototype.timestamp=(new Date).getTime(),a.init.prototype.index=n,a.init.prototype.module=t,h.typeCheck("function",o)&&o(a,u),u.tpl){var f=u.tpl[c];h.typeCheck("string",f)&&""!=f&&(a.init.prototype.tpl[c]=h.template(f))}var l=new a.init;for(var s in u.event)l.on(s,u.event[s]);return r.jui=l},define:function(t,e,n,r){if(!(h.typeCheck("string",t)&&h.typeCheck("array",e)&&h.typeCheck("function",n)&&h.typeCheck(["string","undefined","null"],r)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(h.typeCheck("function",c[t]))throw new Error("JUI_CRITICAL_ERR: '"+t+"' is already exist");var i=f(e),o=n.apply(null,i);if(h.typeCheck("function",c[r])){if(!0!==u[r])throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");h.inherit(o,c[r])}a[t]=o,c[t]=o,u[t]=!0},redefine:function(t,e,n,r,i){i||!0!==u[t]||(a[t]=null,c[t]=null,u[t]=!1),(!i||i&&!0!==u[t])&&this.define(t,e,n,r)},defineOptions:function(t,e,n){for(var r=function t(e,n){if(h.typeCheck("function",e)){if(h.typeCheck("function",e.setup)){var r=e.setup();for(var i in r)h.typeCheck("undefined",n[i])&&(n[i]=r[i])}t(e.parent,n)}return n}(t,{}),i=Object.keys(r),o=Object.keys(e),a=0;a<o.length;a++){var u=o[a];if(-1==h.inArray(u,i)&&-1==h.inArray(u,n))throw new Error("JUI_CRITICAL_ERR: '"+u+"' is not an option")}return h.extend(e,r,!0),e},include:function(t){if(!h.typeCheck("string",t))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");var e=a[t];if(h.typeCheck(["function","object"],e))return e;var n=l(t);return null==n?(console.log("JUI_WARNING_MSG: '"+t+"' is not loaded"),null):n},includeAll:function(){var t=[];for(var e in a)t.push(a[e]);return t},log:function(t){var n=o.open(t||r.logUrl,"JUIM","width=1024, height=768, toolbar=no, menubar=no, resizable=yes");return jui.debugAll(function(t,e){n.log(t,e)}),n},setup:function(t){return h.typeCheck("object",t)&&(r=h.extend(r,t)),r}},"object"==typeof module&&module.exports&&(module.exports=o.jui||a.jui)}(window,"undefined"!=typeof global?global:window),jui.define("util.dom",["util.base"],function(o){return{find:function(){var t=arguments;if(1==t.length){if(o.typeCheck("string",t[0]))return document.querySelectorAll(t[0])}else if(2==t.length&&o.typeCheck("object",t[0])&&o.typeCheck("string",t[1]))return t[0].querySelectorAll(t[1]);return[]},each:function(t,n){if(o.typeCheck("function",n)){var e=null;o.typeCheck("string",t)?e=document.querySelectorAll(t):o.typeCheck("array",t)&&(e=t),null!=e&&Array.prototype.forEach.call(e,function(t,e){n.apply(t,[e,t])})}},attr:function(t,e){if(o.typeCheck(["string","array"],t)){var n=document.querySelectorAll(t);if(o.typeCheck("object",e))for(var r=0;r<n.length;r++)for(var i in e)n[r].setAttribute(i,e[i]);else if(o.typeCheck("string",e)&&0<n.length)return n[0].getAttribute(e)}},remove:function(t){this.each(t,function(){this.parentNode.removeChild(this)})},offset:function(t){var e,n,r={top:0,left:0},i=t&&t.ownerDocument;if(i){e=i.documentElement;var o,a;return void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),n=null!=(a=o=i)&&a==a.window?o:9===o.nodeType&&(o.defaultView||o.parentWindow),{top:r.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}}}}),jui.define("util.sort",[],function(){return function(a,t){var u=null;a=t?a.slice(0):a;function c(t,e){var n=a[t];a[t]=a[e],a[e]=n}this.setCompare=function(t){u=t},this.run=function(t,e){var n=null;return"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=a.length-1),t<e&&(n=t+Math.ceil(.5*(e-t)),newPivot=function(t,e,n){var r=e,i=a[t];c(t,n);for(var o=e;o<n;o++)(u(a[o],i)||!u(i,a[o])&&o%2==1)&&(c(o,r),r++);return c(n,r),r}(n,t,e),this.run(t,newPivot-1),this.run(newPivot+1,e)),a}}}),jui.define("util.keyparser",[],function(){return function(){this.isIndexDepth=function(t){return"string"==typeof t&&-1!=t.indexOf(".")},this.getIndexList=function(t){for(var e=[],n=(""+t).split("."),r=0;r<n.length;r++)e[r]=parseInt(n[r]);return e},this.changeIndex=function(t,e,n){for(var r=this.getIndexList(n).length,i=this.getIndexList(t),o=this.getIndexList(e),a=0;a<r;a++)i.shift();return o.concat(i).join(".")},this.getNextIndex=function(t){var e=this.getIndexList(t),n=e.pop()+1;return e.push(n),e.join(".")},this.getParentIndex=function(t){return this.isIndexDepth(t)?t.substr(0,t.lastIndexOf(".")):null}}}),jui.define("util.base64",[],function(){var l={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,r,i,o,a,u,c="",f=0;for(t=l._utf8_encode(t);f<t.length;)i=(e=t.charCodeAt(f++))>>2,o=(3&e)<<4|(n=t.charCodeAt(f++))>>4,a=(15&n)<<2|(r=t.charCodeAt(f++))>>6,u=63&r,isNaN(n)?a=u=64:isNaN(r)&&(u=64),c=c+l._keyStr.charAt(i)+l._keyStr.charAt(o)+l._keyStr.charAt(a)+l._keyStr.charAt(u);return c},decode:function(t){var e,n,r,i,o,a,u="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)e=l._keyStr.indexOf(t.charAt(c++))<<2|(i=l._keyStr.indexOf(t.charAt(c++)))>>4,n=(15&i)<<4|(o=l._keyStr.indexOf(t.charAt(c++)))>>2,r=(3&o)<<6|(a=l._keyStr.indexOf(t.charAt(c++))),u+=String.fromCharCode(e),64!=o&&(u+=String.fromCharCode(n)),64!=a&&(u+=String.fromCharCode(r));return u=l._utf8_decode(u)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e=String.fromCharCode(239)+String.fromCharCode(187)+String.fromCharCode(191),n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):(127<r&&r<2048?e+=String.fromCharCode(r>>6|192):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128)),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){for(var e="",n=0,r=c1=c2=0;n<t.length;)(r=t.charCodeAt(n))<128?(e+=String.fromCharCode(r),n++):191<r&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}};return l}),jui.define("util.math",["util.base"],function(n){function f(t,e){for(var n=[],r=0,i=t.length;r<i;r++){for(var o=0,a=0,u=t[r].length;a<u;a++)o+=t[r][a]*e[a];n.push(o)}return n}return{rotate:function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}},resize:function(t,e,n,r){var i=r/n;return t<=n&&i<=1?(n=t,r=e*i):e<=r&&(r=e,n=t/i),{width:n,height:r}},radian:function(t){return t*Math.PI/180},degree:function(t){return 180*t/Math.PI},angle:function(t,e,n,r){var i=n-t,o=r-e;return Math.atan2(o,i)},interpolateNumber:function(e,t){var n=t-e;return function(t){return e+n*t}},interpolateRound:function(e,t){var n=t-e;return function(t){return Math.round(e+n*t)}},getFixed:function(t,e){var n=(t+"").split("."),r=n.length<2?0:n[1].length,i=(e+"").split("."),o=i.length<2?0:i[1].length;return o<r?r:o},fixed:function(t){var e=this.getFixed(t,0),i=Math.pow(10,e),n=function(t){return Math.round(t*i)/i};return n.plus=function(t,e){return Math.round(t*i+e*i)/i},n.minus=function(t,e){return Math.round(t*i-e*i)/i},n.multi=function(t,e){return Math.round(t*i*(e*i))/(i*i)},n.div=function(t,e){var n=t*i/(e*i),r=Math.pow(10,this.getFixed(n,0));return Math.round(n*r)/r},n.remain=function(t,e){return Math.round(t*i%(e*i))/i},n},round:function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},plus:function(t,e){var n=Math.pow(10,this.getFixed(t,e));return Math.round(t*n+e*n)/n},minus:function(t,e){var n=Math.pow(10,this.getFixed(t,e));return Math.round(t*n-e*n)/n},multi:function(t,e){var n=Math.pow(10,this.getFixed(t,e));return Math.round(t*n*(e*n))/(n*n)},div:function(t,e){var n=Math.pow(10,this.getFixed(t,e)),r=t*n/(e*n),i=Math.pow(10,this.getFixed(r,0));return Math.round(r*i)/i},remain:function(t,e){var n=Math.pow(10,this.getFixed(t,e));return Math.round(t*n%(e*n))/n},nice:function(t,e,n,r){if(e<t)var i=t,o=e;else o=t,i=e;var a,u,c=n,f=0,l=[];function s(t,e){var n=Math.floor(Math.log(t)/Math.LN10),r=t/Math.pow(10,n);return niceFraction=e?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10,niceFraction*Math.pow(10,n)}return l=(r=r||!1)?s(i-o,!1):i-o,f=r?s(l/c,!0):l/c,a=r?Math.floor(o/f)*f:o,u=r?Math.floor(i/f)*f:i,{min:a,max:u,range:l,spacing:f}},matrix:function(t,e){return n.typeCheck("array",e[0])?function(t,e){for(var n=[],r=[],i=0,o=e.length;i<o;i++)n[i]=[],r[i]=[];for(i=0,o=e.length;i<o;i++)for(var a=0,u=e[i].length;a<u;a++)n[a].push(e[i][a]);for(i=0,o=n.length;i<o;i++){var c=f(t,n[i]);for(a=0,u=c.length;a<u;a++)r[a].push(c[a])}return r}(t,e):f(t,e)},matrix3d:function(t,e){return e[0]instanceof Array||e[0]instanceof Float32Array?(n=t,r=e,i=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],o=[new Float32Array([r[0][0],r[1][0],r[2][0],r[3][0]]),new Float32Array([r[0][1],r[1][1],r[2][1],r[3][1]]),new Float32Array([r[0][2],r[1][2],r[2][2],r[3][2]]),new Float32Array([r[0][3],r[1][3],r[2][3],r[3][3]])],i[0][0]=n[0][0]*o[0][0]+n[0][1]*o[0][1]+n[0][2]*o[0][2]+n[0][3]*o[0][3],i[1][0]=n[1][0]*o[0][0]+n[1][1]*o[0][1]+n[1][2]*o[0][2]+n[1][3]*o[0][3],i[2][0]=n[2][0]*o[0][0]+n[2][1]*o[0][1]+n[2][2]*o[0][2]+n[2][3]*o[0][3],i[3][0]=n[3][0]*o[0][0]+n[3][1]*o[0][1]+n[3][2]*o[0][2]+n[3][3]*o[0][3],i[0][1]=n[0][0]*o[1][0]+n[0][1]*o[1][1]+n[0][2]*o[1][2]+n[0][3]*o[1][3],i[1][1]=n[1][0]*o[1][0]+n[1][1]*o[1][1]+n[1][2]*o[1][2]+n[1][3]*o[1][3],i[2][1]=n[2][0]*o[1][0]+n[2][1]*o[1][1]+n[2][2]*o[1][2]+n[2][3]*o[1][3],i[3][1]=n[3][0]*o[1][0]+n[3][1]*o[1][1]+n[3][2]*o[1][2]+n[3][3]*o[1][3],i[0][2]=n[0][0]*o[2][0]+n[0][1]*o[2][1]+n[0][2]*o[2][2]+n[0][3]*o[2][3],i[1][2]=n[1][0]*o[2][0]+n[1][1]*o[2][1]+n[1][2]*o[2][2]+n[1][3]*o[2][3],i[2][2]=n[2][0]*o[2][0]+n[2][1]*o[2][1]+n[2][2]*o[2][2]+n[2][3]*o[2][3],i[3][2]=n[3][0]*o[2][0]+n[3][1]*o[2][1]+n[3][2]*o[2][2]+n[3][3]*o[2][3],i[0][3]=n[0][0]*o[3][0]+n[0][1]*o[3][1]+n[0][2]*o[3][2]+n[0][3]*o[3][3],i[1][3]=n[1][0]*o[3][0]+n[1][1]*o[3][1]+n[1][2]*o[3][2]+n[1][3]*o[3][3],i[2][3]=n[2][0]*o[3][0]+n[2][1]*o[3][1]+n[2][2]*o[3][2]+n[2][3]*o[3][3],i[3][3]=n[3][0]*o[3][0]+n[3][1]*o[3][1]+n[3][2]*o[3][2]+n[3][3]*o[3][3],i):(a=t,u=e,(c=new Float32Array(4))[0]=a[0][0]*u[0]+a[0][1]*u[1]+a[0][2]*u[2]+a[0][3]*u[3],c[1]=a[1][0]*u[0]+a[1][1]*u[1]+a[1][2]*u[2]+a[1][3]*u[3],c[2]=a[2][0]*u[0]+a[2][1]*u[1]+a[2][2]*u[2]+a[2][3]*u[3],c[3]=a[3][0]*u[0]+a[3][1]*u[1]+a[3][2]*u[2]+a[3][3]*u[3],c);var n,r,i,o,a,u,c},inverseMatrix3d:function(t){return function(t){var e=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],n=t[0][0],r=t[0][1],i=t[0][2],o=t[0][3],a=t[1][0],u=t[1][1],c=t[1][2],f=t[1][3],l=t[2][0],s=t[2][1],h=t[2][2],p=t[2][3],d=t[3][0],y=t[3][1],g=t[3][2],v=t[3][3];e[0][0]=c*p*y-f*h*y+f*s*g-u*p*g-c*s*v+u*h*v,e[0][1]=o*h*y-i*p*y-o*s*g+r*p*g+i*s*v-r*h*v,e[0][2]=i*f*y-o*c*y+o*u*g-r*f*g-i*u*v+r*c*v,e[0][3]=o*c*s-i*f*s-o*u*h+r*f*h+i*u*p-r*c*p,e[1][0]=f*h*d-c*p*d-f*l*g+a*p*g+c*l*v-a*h*v,e[1][1]=i*p*d-o*h*d+o*l*g-n*p*g-i*l*v+n*h*v,e[1][2]=o*c*d-i*f*d-o*a*g+n*f*g+i*a*v-n*c*v,e[1][3]=i*f*l-o*c*l+o*a*h-n*f*h-i*a*p+n*c*p,e[2][0]=u*p*d-f*s*d+f*l*y-a*p*y-u*l*v+a*s*v,e[2][1]=o*s*d-r*p*d-o*l*y+n*p*y+r*l*v-n*s*v,e[2][2]=r*f*d-o*u*d+o*a*y-n*f*y-r*a*v+n*u*v,e[2][3]=o*u*l-r*f*l-o*a*s+n*f*s+r*a*p-n*u*p,e[3][0]=c*s*d-u*h*d-c*l*y+a*h*y+u*l*g-a*s*g,e[3][1]=r*h*d-i*s*d+i*l*y-n*h*y-r*l*g+n*s*g,e[3][2]=i*u*d-r*c*d-i*a*y+n*c*y+r*a*g-n*u*g,e[3][4]=r*c*l-i*u*l+i*a*s-n*c*s-r*a*h+n*u*h;var m=1/(n*e[0][0]+a*e[0][1]+l*e[0][2]+d*e[0][3]);return 0===m?e=[new Float32Array([1,0,0,0]),new Float32Array([0,1,0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])]:(e[0][0]*=m,e[0][1]*=m,e[0][2]*=m,e[0][3]*=m,e[1][0]*=m,e[1][1]*=m,e[1][2]*=m,e[1][3]*=m,e[2][0]*=m,e[2][1]*=m,e[2][2]*=m,e[2][3]*=m,e[3][0]*=m,e[3][1]*=m,e[3][2]*=m,e[3][4]*=m),e}(t)},scaleValue:function(t,e,n,r,i){return(i-r)*((t-(e=e==n?0:e))/(n-e))+r}}},null,!0),jui.define("util.template",[],function(){return function(t,e,n){var a={},u={},r=Array.prototype,i=r.slice,c=r.forEach,f={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(var o in f)f[f[o]]=o;var l=/\\|'|\r|\n|\t|\u2028|\u2029/g,s=/\\(\\|'|r|n|t|u2028|u2029)/g,h=/.^/,p=function(t){return t.replace(s,function(t,e){return f[e]})},d=a.each=a.forEach=function(t,e,n){if(null!=t)if(c&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r,t)===u)return}else for(var o in t)if(a.has(t,o)&&e.call(n,t[o],o,t)===u)return};return a.has=function(t,e){return hasOwnProperty.call(t,e)},a.defaults=function(n){return d(i.call(arguments,1),function(t){for(var e in t)null==n[e]&&(n[e]=t[e])}),n},a.template=function(t,e,n){n=a.defaults(n||{});var r="__p+='"+t.replace(l,function(t){return"\\"+f[t]}).replace(n.escape||h,function(t,e){return"'+\n_.escape("+p(e)+")+\n'"}).replace(n.interpolate||h,function(t,e){return"'+\n("+p(e)+")+\n'"}).replace(n.evaluate||h,function(t,e){return"';\n"+p(e)+"\n;__p+='"})+"';\n";n.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+r+"return __p;\n";var i=new Function(n.variable||"obj","_",r);if(e)return i(e,a);var o=function(t){return i.call(this,t,a)};return o.source="function("+(n.variable||"obj")+"){\n"+r+"}",o},a.template(t,e,n)}}),jui.define("util.color",["util.base","util.math"],function(o,a){var u={regex:/(linear|radial)\((.*)\)(.*)/i,format:function(t,e){if("hex"==e){var n=t.r.toString(16);t.r<16&&(n="0"+n);var r=t.g.toString(16);t.g<16&&(r="0"+r);var i=t.b.toString(16);return t.b<16&&(i="0"+i),"#"+[n,r,i].join("").toUpperCase()}return"rgb"==e?void 0===t.a?"rgb("+[t.r,t.g,t.b].join(",")+")":"rgba("+[t.r,t.g,t.b,t.a].join(",")+")":t},scale:function(){var r,i;function o(t,e){var n={r:parseInt(r.r+(i.r-r.r)*t,10),g:parseInt(r.g+(i.g-r.g)*t,10),b:parseInt(r.b+(i.b-r.b)*t,10)};return u.format(n,e)}return o.domain=function(t,e){return r=u.rgb(t),i=u.rgb(e),o},o.ticks=function(t){for(var e=1/t,n=0,r=[];n<=1;){var i=o(n,"hex");r.push(i),n=a.plus(n,e)}return r},o},map:function(t,e){var n=[];e=e||5;for(var r=u.scale(),i=0,o=t.length-1;i<o;i++)if(0==i)n=r.domain(t[i],t[i+1]).ticks(e);else{var a=r.domain(t[i],t[i+1]).ticks(e);a.shift(),n=n.concat(a)}return n},rgb:function(t){if("string"==typeof t){if(-1<t.indexOf("rgb(")){for(var e=0,n=(r=t.replace("rgb(","").replace(")","").split(",")).length;e<n;e++)r[e]=parseInt(o.trim(r[e]),10);return{r:r[0],g:r[1],b:r[2],a:1}}if(-1<t.indexOf("rgba(")){for(e=0,n=(r=t.replace("rgba(","").replace(")","").split(",")).length;e<n;e++)r[e]=n-1==e?parseFloat(o.trim(r[e])):parseInt(o.trim(r[e]),10);return{r:r[0],g:r[1],b:r[2],a:r[3]}}if(0==t.indexOf("#")){var r=[];if(3==(t=t.replace("#","")).length)for(e=0,n=t.length;e<n;e++){var i=t.substr(e,1);r.push(parseInt(i+i,16))}else for(e=0,n=t.length;e<n;e+=2)r.push(parseInt(t.substr(e,2),16));return{r:r[0],g:r[1],b:r[2],a:1}}}return t},HSVtoRGB:function(t,e,n){360==t&&(t=0);var r=e*n,i=r*(1-Math.abs(t/60%2-1)),o=n-r,a=[];return 0<=t&&t<60?a=[r,i,0]:60<=t&&t<120?a=[i,r,0]:120<=t&&t<180?a=[0,r,i]:180<=t&&t<240?a=[0,i,r]:240<=t&&t<300?a=[i,0,r]:300<=t&&t<360&&(a=[r,0,i]),{r:Math.ceil(255*(a[0]+o)),g:Math.ceil(255*(a[1]+o)),b:Math.ceil(255*(a[2]+o))}},RGBtoHSV:function(t,e,n){var r=t/255,i=e/255,o=n/255,a=Math.max(r,i,o),u=a-Math.min(r,i,o),c=0;0==u?c=0:a==r?c=(i-o)/u%6*60:a==i?c=60*((o-r)/u+2):a==o&&(c=60*((r-i)/u+4)),c<0&&(c=360+c);return{h:c,s:0==a?0:u/a,v:a}},trim:function(t){return(t||"").replace(/^\s+|\s+$/g,"")},lighten:function(t,e){t=t.replace(/[^0-9a-f]/gi,""),e=e||0;var n,r,i=[];for(r=0;r<6;r+=2)n=parseInt(t.substr(r,2),16),n=Math.round(Math.min(Math.max(0,n+n*e),255)).toString(16),i.push(("00"+n).substr(n.length));return"#"+i.join("")},darken:function(t,e){return this.lighten(t,-e)},parse:function(t){return this.parseGradient(t)},parseGradient:function(t){var e=t.match(this.regex);if(!e)return t;var n=this.trim(e[1]);return{type:n+"Gradient",attr:this.parseAttr(n,this.trim(e[2])),children:this.parseStop(this.trim(e[3]))}},parseStop:function(t){for(var e=t.split(","),n=[],r=0,i=e.length;r<i;r++){var o=(t=e[r]).split(" ");0!=o.length&&(1==o.length?n.push({type:"stop",attr:{"stop-color":o[0]}}):2==o.length?n.push({type:"stop",attr:{offset:o[0],"stop-color":o[1]}}):3==o.length&&n.push({type:"stop",attr:{offset:o[0],"stop-color":o[1],"stop-opacity":o[2]}}))}var a=-1,u=-1;for(r=0,i=n.length;r<i;r++){t=n[r];if(0==r?t.offset||(t.offset=0):r==i-1&&(t.offset||(t.offset=1)),-1==a&&void 0===t.offset)a=r;else if(-1==u&&void 0===t.offset){for(var c=(u=r)-a,f=-1<n[u].offset.indexOf("%")?parseFloat(n[u].offset)/100:n[u].offset,l=-1<n[a].offset.indexOf("%")?parseFloat(n[a].offset)/100:n[a].offset,s=(f-l)/c,h=l+s,p=a+1;p<u;p++)n[p].offset=h,h+=s;a=u,u=-1}}return n},parseAttr:function(t,e){if("linear"!=t){for(r=0,i=(n=e.split(",")).length;r<i;r++)-1==n[r].indexOf("%")&&(n[r]=parseFloat(n[r]));return{cx:n[0],cy:n[1],r:n[2],fx:n[3],fy:n[4]}}switch(e){case"":case"left":return{x1:0,y1:0,x2:1,y2:0,direction:e||"left"};case"right":return{x1:1,y1:0,x2:0,y2:0,direction:e};case"top":return{x1:0,y1:0,x2:0,y2:1,direction:e};case"bottom":return{x1:0,y1:1,x2:0,y2:0,direction:e};case"top left":return{x1:0,y1:0,x2:1,y2:1,direction:e};case"top right":return{x1:1,y1:0,x2:0,y2:1,direction:e};case"bottom left":return{x1:0,y1:1,x2:1,y2:0,direction:e};case"bottom right":return{x1:1,y1:1,x2:0,y2:0,direction:e};default:for(var n,r=0,i=(n=e.split(",")).length;r<i;r++)-1==n[r].indexOf("%")&&(n[r]=parseFloat(n[r]));return{x1:n[0],y1:n[1],x2:n[2],y2:n[3]}}},colorHash:function(t,e){var n=0;return t&&(n=function(t){var e=0,n=1,r=0;if(t){for(var i=0;i<t.length&&!(6<i);i++)e+=n*(t.charCodeAt(i)%10),r+=9*n,n*=.7;0<r&&(e/=r)}return e}(t=(t=t.replace(/.*`/,"")).replace(/\(.*/,""))),"function"==typeof e?e(n):{r:200+Math.round(55*n),g:0+Math.round(230*(1-n)),b:0+Math.round(55*(1-n))}}};return u.map.parula=function(t){return u.map(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],t)},u.map.jet=function(t){return u.map(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],t)},u.map.hsv=function(t){return u.map(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],t)},u.map.hot=function(t){return u.map(["#0b0000","#ff0000","#ffff00","#ffffff"],t)},u.map.pink=function(t){return u.map(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],t)},u.map.bone=function(t){return u.map(["#000000","#4a4a68","#a6c6c6","#ffffff"],t)},u.map.copper=function(t){return u.map(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],t)},u}),jui.define("manager",["util.base"],function(o){var i=new function(){var u=[],n=[];this.add=function(t){u.push(t)},this.emit=function(t,e,n){for(var r=[],i=0;i<u.length;i++){t!=(o=u[i]).selector&&t!=o.type||r.push(o)}for(i=0;i<r.length;i++)for(var o=r[i],a=0;a<o.length;a++)o[a].emit(e,n)},this.get=function(t){if(o.typeCheck("integer",t))return u[t];if(o.typeCheck("string",t)){for(var e=0;e<u.length;e++){if(t==(r=u[e]).selector)return 1==r.length?r[0]:r}var n=[];for(e=0;e<u.length;e++){var r;t==(r=u[e]).type&&n.push(r)}return n}},this.getAll=function(){return u},this.remove=function(t){if(o.typeCheck("integer",t))return u.splice(t,1)[0]},this.shift=function(){return u.shift()},this.pop=function(){return u.pop()},this.size=function(){return u.length},this.debug=function(t,u,e,c){if(t.__proto__){var n=["emit","on","addEvent","addValid","callBefore","callAfter","callDelay","setTpl","setVo","setOption"];for(var r in t){var i=t[r];"function"==typeof i&&-1==o.inArray(r,n)&&function(r,i,o,a){t.__proto__[r]=function(){var t=Date.now(),e=i.apply(this,arguments),n=Date.now();return"function"==typeof c?c({type:jui.get(u).type,name:r,c_index:o,u_index:a,time:n-t},arguments):(isNaN(o)||isNaN(a)?console.log("NAME("+r+"), TIME("+(n-t)+"ms), ARGUMENTS..."):console.log("TYPE("+jui.get(u).type+"), NAME("+r+"), INDEX("+o+":"+a+"), TIME("+(n-t)+"ms), ARGUMENTS..."),console.log(arguments),console.log("")),e}}(r,i,u,e)}}},this.debugAll=function(t){for(var e=0;e<u.length;e++)for(var n=u[e],r=0;r<n.length;r++)this.debug(n[r],e,r,t)},this.addClass=function(t){n.push(t)},this.getClass=function(t){if(o.typeCheck("integer",t))return n[t];if(o.typeCheck("string",t))for(var e=0;e<n.length;e++)if(t==n[e].type)return n[e];return null},this.getClassAll=function(){return n},this.create=function(t,e,n){var r=i.getClass(t);if(o.typeCheck("null",r))throw new Error("JUI_CRITICAL_ERR: '"+t+"' does not exist");return r.class(e,n)}};return i}),jui.define("collection",[],function(){var t=function(t,e,n,r){this.type=t,this.selector=e,this.options=n,this.destroy=function(){for(var t=0;t<r.length;t++)r[t].destroy()};for(var i=0;i<r.length;i++)this.push(r[i])};return t.prototype=Object.create(Array.prototype),t}),jui.define("core",["util.base","util.dom","manager","collection"],function(u,c,f,l){var n=function(){this.emit=function(t,e){if(u.typeCheck("string",t)){for(var n,r=0;r<this.event.length;r++){var i=this.event[r];if(i.type==t.toLowerCase()){var o=u.typeCheck("array",e)?e:[e];n=i.callback.apply(this,o)}}return n}},this.on=function(t,e){u.typeCheck("string",t)&&u.typeCheck("function",e)&&this.event.push({type:t.toLowerCase(),callback:e,unique:!1})},this.off=function(t){for(var e=[],n=0;n<this.event.length;n++){var r=this.event[n];(u.typeCheck("function",t)&&r.callback!=t||u.typeCheck("string",t)&&r.type!=t.toLowerCase())&&e.push(r)}this.event=e},this.addValid=function(n,r){if(this.__proto__){var i=this.__proto__[n];this.__proto__[n]=function(){for(var t=arguments,e=0;e<t.length;e++)if(!u.typeCheck(r[e],t[e]))throw new Error("JUI_CRITICAL_ERR: the "+e+"th parameter is not a "+r[e]+" ("+n+")");return i.apply(this,t)}}},this.callBefore=function(t,e){if(this.__proto__){var n=this.__proto__[t];this.__proto__[t]=function(){var t=arguments;return u.typeCheck("function",e)?!1!==e.apply(this,t)?n.apply(this,t):void 0:n.apply(this,t)}}},this.callAfter=function(t,n){if(this.__proto__){var r=this.__proto__[t];this.__proto__[t]=function(){var t=arguments,e=r.apply(this,t);return u.typeCheck("function",n)&&!1!==e&&n.apply(this,t),e}}},this.callDelay=function(t,r){if(this.__proto__){var i=this.__proto__[t],n=isNaN(r.delay)?0:r.delay;this.__proto__[t]=function(){var t=this,e=arguments;u.typeCheck("function",r.before)&&r.before.apply(t,e),0<n?setTimeout(function(){o(t,e)},n):o(t,e)}}function o(t,e){var n=i.apply(t,e);u.typeCheck("function",r.after)&&!1!==n&&r.after.apply(t,e)}},this.setTpl=function(t,e){this.tpl[t]=u.template(e)},this.setOption=function(t,e){if(u.typeCheck("object",t))for(var n in t)this.options[n]=t[n];else this.options[t]=e},this.destroy=function(){if(this.__proto__)for(var t in this.__proto__)delete this.__proto__[t]}};return n.build=function(a){return function(t,e){var n=[],r=[];u.typeCheck("string",t)?r=c.find(t):u.typeCheck("object",t)?r.push(t):r.push(document.createElement("div"));for(var i=0,o=r.length;i<o;i++)n[i]=jui.createUIObject(a,t,i,r[i],e);return f.add(new l(a.type,t,e,n)),0==n.length?null:1==n.length?n[0]:n}},n.init=function(t){var e=null;return"object"==typeof t&&(e=n.build(t),f.addClass({type:t.type,class:e})),e},n.setup=function(){return{tpl:{},event:{}}},window.jui="object"==typeof jui?u.extend(jui,f,!0):f,n}),jui.define("event",["jquery","util.base","manager","collection"],function(f,l,a,t){var u=function(){var a=[];function u(t){for(var e=["webkit","moz","MS","o",""],n=0;n<e.length;n++){var r=t.type;e[n]||(r=r.toLowerCase()),f(t.target).on(e[n]+r,t.callback)}a.push(t)}function c(t){return{click:"touchstart",dblclick:"touchend",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}[t]}this.add=function(t){var e={target:t[0],type:t[1]};l.typeCheck("function",t[2])?e=f.extend(e,{callback:t[2]}):l.typeCheck("string",t[2])&&(e=f.extend(e,{children:t[2],callback:t[3]}));for(var n,r,i=l.typeCheck("array",e.type)?e.type:[e.type],o=0;o<i.length;o++)e.type=i[o],-1!=e.type.toLowerCase().indexOf("animation")?u(e):("body"!=e.target&&e.target!=window&&e.target!=document&&f(e.target).off(e.type),l.isTouch?((r=e).callback&&!r.children?f(r.target).on(c(r.type),r.callback):f(r.target).on(c(r.type),r.children,r.callback),a.push(r)):((n=e).callback&&!n.children?f(n.target).on(n.type,n.callback):f(n.target).on(n.type,n.children,n.callback),a.push(n)))},this.trigger=function(t,e){f(t).trigger(l.isTouch?c(e):e)},this.get=function(t){return a[t]},this.getAll=function(){return a},this.size=function(){return a.length}},n=function(){var t=null;this.find=function(t){return f(this.root).find(t)},this.addEvent=function(){this.listen.add(arguments)},this.addTrigger=function(t,e){this.listen.trigger(t,e)},this.setVo=function(){this.options.vo&&(null!=t&&t.reload(),t=f(this.selector).jbinder(),this.bind=t)},this.destroy=function(){for(var t=0;t<this.listen.size();t++){var e=this.listen.get(t);f(e.target).off(e.type)}if(this.__proto__)for(var n in this.__proto__)delete this.__proto__[n]}};return n.build=function(o){return function(r,e){var n=[],i=f(r||"<div />");return i.each(function(t){n[t]=jui.createUIObject(o,i.selector,t,this,e,function(t,n){t.init.prototype.listen=new u,f("script").each(function(t){if(r==f(this).data("jui")||r==f(this).data("vo")||r instanceof HTMLElement){var e=f(this).data("tpl");if(""==e)throw new Error("JUI_CRITICAL_ERR: 'data-tpl' property is required");n.tpl[e]=f(this).html()}})})}),a.add(new t(o.type,r,e,n)),0==n.length?null:1==n.length?n[0]:n}},n.init=function(t){var e=null;return"object"==typeof t&&(e=n.build(t),a.addClass({type:t.type,class:e})),e},n.setup=function(){return{vo:null}},n},"core");